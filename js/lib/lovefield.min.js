if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,ca=this;function p(a){return void 0!==a}function da(){}
function fa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ga(a){return null!=a}function ha(a){var b=fa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==fa(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function q(a,b){a=a.split(".");var c=ca;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&p(b)?c[d]=b:c=c[d]?c[d]:c[d]={}}
function r(a,b){function c(){}c.prototype=b.prototype;a.gb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Ug=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}r(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var F=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==F[0].length&&0==O[0].length)break;b=va(0==F[1].length?0:parseInt(F[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==F[2].length,0==O[2].length)||va(F[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.og=c;this.Nf=a;this.Jg=b;this.pd=0;this.ed=null}wa.prototype.get=function(){var a;0<this.pd?(this.pd--,a=this.ed,this.ed=a.next,a.next=null):a=this.Nf();return a};wa.prototype.put=function(a){this.Jg(a);this.pd<this.og&&(this.pd++,a.next=this.ed,this.ed=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==fa(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Fa(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ga;a:{var Ha=ca.navigator;if(Ha){var Ia=Ha.userAgent;if(Ia){Ga=Ia;break a}}Ga=""}function t(a){return-1!=Ga.indexOf(a)};function Ja(){return(t("Chrome")||t("CriOS"))&&!t("Edge")};function Ka(a){ca.setTimeout(function(){throw a;},0)}var La;
function Na(){var a=ca.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!t("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!t("Trident")&&!t("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(p(c.next)){c=c.next;var a=c.Ee;c.Ee=null;a()}};return function(a){d.next={Ee:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){ca.setTimeout(a,0)}};function Oa(){this.Ad=this.oc=null}var Qa=new wa(function(){return new Pa},function(a){a.reset()},100);Oa.prototype.add=function(a,b){var c=Qa.get();c.set(a,b);this.Ad?this.Ad.next=c:this.oc=c;this.Ad=c};Oa.prototype.remove=function(){var a=null;this.oc&&(a=this.oc,this.oc=this.oc.next,this.oc||(this.Ad=null),a.next=null);return a};function Pa(){this.next=this.scope=this.Sd=null}Pa.prototype.set=function(a,b){this.Sd=a;this.scope=b;this.next=null};
Pa.prototype.reset=function(){this.next=this.scope=this.Sd=null};function Ra(a,b){Sa||Ta();Ua||(Sa(),Ua=!0);Va.add(a,b)}var Sa;function Ta(){if(ca.Promise&&ca.Promise.resolve){var a=ca.Promise.resolve(void 0);Sa=function(){a.then(Wa)}}else Sa=function(){var a=Wa;!ja(ca.setImmediate)||ca.Window&&ca.Window.prototype&&!t("Edge")&&ca.Window.prototype.setImmediate==ca.setImmediate?(La||(La=Na()),La(a)):ca.setImmediate(a)}}var Ua=!1,Va=new Oa;function Wa(){for(var a;a=Va.remove();){try{a.Sd.call(a.scope)}catch(b){Ka(b)}Qa.put(a)}Ua=!1};function u(a,b){this.Ta=0;this.mf=void 0;this.Vc=this.dc=this.D=null;this.dd=this.Qd=!1;if(a!=da)try{var c=this;a.call(b,function(a){Xa(c,2,a)},function(a){Xa(c,3,a)})}catch(d){Xa(this,3,d)}}function Ya(){this.next=this.context=this.ic=this.Ic=this.child=null;this.Dd=!1}Ya.prototype.reset=function(){this.context=this.ic=this.Ic=this.child=null;this.Dd=!1};var Za=new wa(function(){return new Ya},function(a){a.reset()},100);function $a(a,b,c){var d=Za.get();d.Ic=a;d.ic=b;d.context=c;return d}
function v(a){if(a instanceof u)return a;var b=new u(da);Xa(b,2,a);return b}function ab(a){return new u(function(b,c){c(a)})}function bb(a,b,c){cb(a,b,c,null)||Ra(qa(b,a))}function db(a){return new u(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],bb(n,qa(f,k),h);else b(e)})}function eb(){var a,b,c=new u(function(c,e){a=c;b=e});return new fb(c,a,b)}
u.prototype.then=function(a,b,c){return gb(this,ja(a)?a:null,ja(b)?b:null,c)};u.prototype.then=u.prototype.then;u.prototype.$goog_Thenable=!0;u.prototype.ue=function(a,b){return gb(this,null,a,b)};function hb(a,b){a.dc||2!=a.Ta&&3!=a.Ta||ib(a);a.Vc?a.Vc.next=b:a.dc=b;a.Vc=b}
function gb(a,b,c,d){var e=$a(null,null,null);e.child=new u(function(a,h){e.Ic=b?function(c){try{var e=b.call(d,c);a(e)}catch(F){h(F)}}:a;e.ic=c?function(b){try{var e=c.call(d,b);!p(e)&&b instanceof jb?h(b):a(e)}catch(F){h(F)}}:h});e.child.D=a;hb(a,e);return e.child}u.prototype.Pg=function(a){this.Ta=0;Xa(this,2,a)};u.prototype.Qg=function(a){this.Ta=0;Xa(this,3,a)};
function Xa(a,b,c){0==a.Ta&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ta=1,cb(c,a.Pg,a.Qg,a)||(a.mf=c,a.Ta=b,a.D=null,ib(a),3!=b||c instanceof jb||kb(a,c)))}function cb(a,b,c,d){if(a instanceof u)return hb(a,$a(b||da,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return lb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function lb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function ib(a){a.Qd||(a.Qd=!0,Ra(a.Uf,a))}function mb(a){var b=null;a.dc&&(b=a.dc,a.dc=b.next,b.next=null);a.dc||(a.Vc=null);return b}
u.prototype.Uf=function(){for(var a;a=mb(this);){var b=this.Ta,c=this.mf;if(3==b&&a.ic&&!a.Dd){var d;for(d=this;d&&d.dd;d=d.D)d.dd=!1}if(a.child)a.child.D=null,nb(a,b,c);else try{a.Dd?a.Ic.call(a.context):nb(a,b,c)}catch(e){ob.call(null,e)}Za.put(a)}this.Qd=!1};function nb(a,b,c){2==b?a.Ic.call(a.context,c):a.ic&&a.ic.call(a.context,c)}function kb(a,b){a.dd=!0;Ra(function(){a.dd&&ob.call(null,b)})}var ob=Ka;function jb(a){ra.call(this,a)}r(jb,ra);jb.prototype.name="cancel";
function fb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};function pb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var F=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(F.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return F}function qb(a){return Aa(arguments,function(a,c){return a+c},0)}
function rb(a){return qb.apply(null,arguments)/arguments.length}function sb(a){var b=arguments.length;if(2>b)return 0;var c=rb.apply(null,arguments);return qb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function tb(a){return Math.sqrt(sb.apply(null,arguments))};var ub="StopIteration"in ca?ca.StopIteration:{message:"StopIteration",stack:""};function vb(){}vb.prototype.next=function(){throw ub;};vb.prototype.pc=function(){return this};function wb(a){if(a instanceof vb)return a;if("function"==typeof a.pc)return a.pc(!1);if(ha(a)){var b=0,c=new vb;c.next=function(){for(;;){if(b>=a.length)throw ub;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function xb(a,b){if(ha(a))try{ya(a,b,void 0)}catch(c){if(c!==ub)throw c;}else{a=wb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==ub)throw c;}}}function yb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new vb;var b=new vb,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw ub;};return b};function zb(a,b){this.l={};this.a=[];this.Ua=this.Eb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=zb.prototype;m.zc=g("Eb");m.ra=function(){Ab(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.l[this.a[b]]);return a};function Bb(a){Ab(a);return a.a.concat()}m.Pa=function(a){return Eb(this.l,a)};m.hd=function(){return 0==this.Eb};
m.clear=function(){this.l={};this.Ua=this.Eb=this.a.length=0};m.remove=function(a){return Eb(this.l,a)?(delete this.l[a],this.Eb--,this.Ua++,this.a.length>2*this.Eb&&Ab(this),!0):!1};function Ab(a){if(a.Eb!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Eb(a.l,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.Eb!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Eb(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}m.get=function(a,b){return Eb(this.l,a)?this.l[a]:b};
m.set=function(a,b){Eb(this.l,a)||(this.Eb++,this.a.push(a),this.Ua++);this.l[a]=b};m.addAll=function(a){var b;if(a instanceof zb)b=Bb(a),a=a.ra();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Fa(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Bb(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};m.clone=function(){return new zb(this)};
m.pc=function(a){Ab(this);var b=0,c=this.Ua,d=this,e=new vb;e.next=function(){if(c!=d.Ua)throw Error("The map has changed since the iterator was created");if(b>=d.a.length)throw ub;var e=d.a[b++];return a?e:d.l[e]};return e};function Eb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Fb(){return t("iPhone")&&!t("iPod")&&!t("iPad")};var Gb=t("Opera"),Hb=t("Trident")||t("MSIE"),Ib=t("Edge"),Jb=t("Gecko")&&!(-1!=Ga.toLowerCase().indexOf("webkit")&&!t("Edge"))&&!(t("Trident")||t("MSIE"))&&!t("Edge"),Kb=-1!=Ga.toLowerCase().indexOf("webkit")&&!t("Edge"),Lb;
a:{var Mb="",Nb=function(){var a=Ga;if(Jb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Ib)return/Edge\/([\d\.]+)/.exec(a);if(Hb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Kb)return/WebKit\/(\S+)/.exec(a);if(Gb)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Nb&&(Mb=Nb?Nb[1]:"");if(Hb){var Ob,Pb=ca.document;Ob=Pb?Pb.documentMode:void 0;if(null!=Ob&&Ob>parseFloat(Mb)){Lb=String(Ob);break a}}Lb=Mb}var ua=Lb,Qb={};var Rb=Fb()||t("iPod"),Sb=t("iPad"),Tb=Ja(),Ub=t("Safari")&&!(Ja()||t("Coast")||t("Opera")||t("Edge")||t("Silk")||t("Android"))&&!(Fb()||t("iPad")||t("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Vb(){this.oe=Ub||Sb||Rb;this.eg=!(this.oe||Hb&&!Qb[10]&&!(Qb[10]=0<=ta(10)));!Hb||Qb[11]||(Qb[11]=0<=ta(11));this.Tg=Tb||Ub;this.tg=p(window.Map)&&p(window.Map.prototype.values)&&p(window.Map.prototype.forEach)&&!this.oe;this.ug=p(window.Set)&&p(window.Set.prototype.values)&&p(window.Set.prototype.forEach)&&!this.oe}var Wb;function Xb(){p(Wb)||(Wb=new Vb);return Wb};function w(){this.l=new zb;Object.defineProperty(this,"size",{get:function(){return this.l.zc()}})}w.prototype.clear=function(){this.l.clear()};w.prototype.clear=w.prototype.clear;w.prototype.delete=function(a){return this.l.remove(a)};w.prototype["delete"]=w.prototype.delete;w.prototype.forEach=function(a,b){return this.l.forEach(a,b)};w.prototype.forEach=w.prototype.forEach;w.prototype.get=function(a){return this.l.get(a)};w.prototype.get=w.prototype.get;w.prototype.has=function(a){return this.l.Pa(a)};
w.prototype.has=w.prototype.has;w.prototype.set=function(a,b){return this.l.set(a,b)};w.prototype.set=w.prototype.set;var Yb=Xb().tg;function x(){return Yb?new window.Map:new w}function Zb(a){if(a instanceof w)return Bb(a.l);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function y(a){if(a instanceof w)return a.l.ra();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function $b(a,b){this.sa=a;this.m=b||this.Je()}var ac=0;m=$b.prototype;m.id=g("sa");m.Je=function(){return{}};m.vf=g("m");m.Ja=function(){return{id:this.sa,value:this.vf()}};m.nb=function(a){return"#"==a.substr(-1)?this.sa:null};function bc(a){return new $b(a.id,a.value)}function cc(a){return new $b(ac++,a||{})}function dc(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var fc={};q("lf.TransactionType",fc);fc.READ_ONLY=0;fc.READ_WRITE=1;function z(a,b,c,d,e){this.vd=a;this.ig=b;this.Sg=c;this.Pf=d;this.If=e}q("lf.TransactionStats",z);z.prototype.Ng=g("vd");z.prototype.success=z.prototype.Ng;z.prototype.hg=g("ig");z.prototype.insertedRowCount=z.prototype.hg;z.prototype.Rg=g("Sg");z.prototype.updatedRowCount=z.prototype.Rg;z.prototype.Of=g("Pf");z.prototype.deletedRowCount=z.prototype.Of;z.prototype.Hf=g("If");z.prototype.changedTableCount=z.prototype.Hf;function gc(a,b){this.xd=a;this.Ra=b||null;this.S=eb();this.vd=!1;this.za=null}gc.prototype.ka=function(){return(0==this.xd?this.sc():hc(this)).then(function(a){this.vd=!0;return a}.bind(this))};function hc(a){try{ic(a.Ra)}catch(b){return ab(b)}return jc(a).then(function(a){this.Ra.ka();return a}.bind(a))}function jc(a){kc(a);lc(a);return a.sc()}
function kc(a){a.Ra.hb.forEach(function(a,c){c=this.Ra.da().get(c);c=this.H(c.getName(),c.kb.bind(c),0);var d=y(a.xa).map(function(a){return a.id()});0<d.length&&c.remove(d).ue(this.Se,this);a=y(a.ma).map(function(a){return a[1]}).concat(y(a.wa));c.put(a).ue(this.Se,this)},a)}function lc(a){mc(a.Ra).forEach(function(a){var c=this.H(a.getName(),bc,1);c.remove([]);c.put(a.Ja())},a)}gc.prototype.Se=function(a){this.S.reject(a)};
gc.prototype.Y=function(){if(null===this.za)if(this.vd)if(0==this.xd)this.za=new z(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.Ra.hb.forEach(function(e){d++;a+=e.wa.size;c+=e.ma.size;b+=e.xa.size});this.za=new z(!0,a,c,b,d)}else this.za=new z(!1,0,0,0,0);return this.za};function nc(a){this.Kg=a}nc.prototype.toString=g("Kg");var oc=new nc("backstore"),pc=new nc("cache"),qc=new nc("indexstore"),rc=new nc("engine"),sc=new nc("runner"),tc=new nc("observerregistry"),uc=new nc("schema");function vc(a){if(a.ra&&"function"==typeof a.ra)return a.ra();if(ia(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Fa(a)};function wc(a){this.l=new zb;a&&this.addAll(a)}function xc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ka(a):b.substr(0,1)+a}m=wc.prototype;m.zc=function(){return this.l.zc()};m.add=function(a){this.l.set(xc(a),a)};m.addAll=function(a){a=vc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.l.remove(xc(a))};m.clear=function(){this.l.clear()};m.hd=function(){return this.l.hd()};m.contains=function(a){return this.l.Pa(xc(a))};m.ra=function(){return this.l.ra()};
m.clone=function(){return new wc(this)};m.pc=function(){return this.l.pc(!1)};function yc(a){this.Xb=new wc(a);Object.defineProperty(this,"size",{get:function(){return this.Xb.zc()}})}yc.prototype.add=function(a){this.Xb.add(a)};yc.prototype.add=yc.prototype.add;yc.prototype.clear=function(){this.Xb.clear()};yc.prototype.clear=yc.prototype.clear;yc.prototype.delete=function(a){return this.Xb.remove(a)};yc.prototype["delete"]=yc.prototype.delete;yc.prototype.forEach=function(a,b){this.Xb.ra().forEach(a,b)};yc.prototype.has=function(a){return this.Xb.contains(a)};
yc.prototype.has=yc.prototype.has;var zc=Xb().ug;function A(a){return zc?p(a)?new window.Set(a):new window.Set:new yc(a)}function B(a){if(a instanceof yc)return a.Xb.ra();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function Ac(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function Bc(a,b){this.sa=a;this.m=b||{}}function Cc(a){var b=A();a.forEach(function(a){b.add(a>>9)});return B(b)}Bc.prototype.W=g("sa");function Dc(a,b){b.forEach(function(a){this.m[a.id()]=a.Ja()},a)}function Ec(a,b){b.forEach(function(a){delete this.m[a]},a)}Bc.prototype.Ja=function(){return{id:this.sa,value:JSON.stringify(this.m)}};function Fc(a){return new Bc(a.id,JSON.parse(a.value))};function Gc(a,b,c){this.Z=a;this.Gb=b;this.nf=c}m=Gc.prototype;m.get=function(a){if(0==a.length)return this.Ud();var b=this.Gb;return Hc(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.m[a])})})};function Hc(a,b){var c=x(),d=eb();a=Cc(b).map(function(a){return new u(function(b,d){var k;try{k=this.Z.get(a)}catch(n){d(n);return}k.onerror=d;k.onsuccess=function(a){a=Fc(a.target.result);c.set(a.W(),a);b()}},this)},a);db(a).then(function(){d.resolve(c)});return d.ha}
m.Ud=function(){return new u(function(a,b){var c=[],d;try{d=this.Z.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f=Fc(b.value).m,h;for(h in f)c.push(this.Gb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Tb=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return v();var b=x();a.forEach(function(a){var d=a.id()>>9,e=b.get(d)||null;null===e&&(e=this.nf(this.Z.name,d));Dc(e,[a]);b.set(d,e)},this);a=y(b).map(function(a){return this.Tb(function(){return this.Z.put(a.Ja())}.bind(this))},this);return db(a)};
m.remove=function(a){if(0==a.length)return this.Tb(function(){return this.Z.clear()}.bind(this));var b=x();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.nf(this.Z.name,d));Ec(e,[a]);b.set(d,e)},this);a=y(b).map(function(a){return this.Tb(function(){return 0==Object.keys(a.m).length?this.Z.delete(a.W()):this.Z.put(a.Ja())}.bind(this))},this);return db(a)};function Ic(a,b,c){a=a.b(pc);var d=[c<<9,(c+1<<9)-1];b=a.Va(b,d[0],d[1]);c=new Bc(c);Dc(c,b);return c}
function Jc(a,b){return new Bc(b)};function Kc(a){this.V=a.b(pc);this.C=a.b(qc);this.g=a.b(uc)}Kc.prototype.update=function(a){a.forEach(function(a){Lc(this,a);Mc(this,a)},this)};function Mc(a,b){var c=b.getName();b.xa.forEach(function(a,b){this.V.remove(c,b)},a);b.wa.forEach(function(a){this.V.set(c,a)},a);b.ma.forEach(function(a){this.V.set(c,a[1])},a)}function Lc(a,b){var c=a.g.table(b.getName());Nc(b).forEach(function(a){Oc(this,c,a)},a)}
function Oc(a,b,c){var d=a.C.lc.get(b.getName())||[],e=0;d.forEach(function(a){try{Pc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Pc(a,[c[1],c[0]])},this),b;}},a)}function Pc(a,b){var c=null===b[1]?void 0:b[1].nb(a.getName()),d=null===b[0]?void 0:b[0].nb(a.getName());if(!p(d)&&p(c))a.add(c,b[1].id());else if(p(d)&&p(c)){if(null===c||null===d){if(c==d)return}else if(0==a.jb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else p(d)&&!p(c)&&a.remove(d,b[0].id())};var Qc={};q("lf.ConstraintAction",Qc);Qc.RESTRICT=0;Qc.CASCADE=1;var Rc={};q("lf.ConstraintTiming",Rc);Rc.IMMEDIATE=0;Rc.DEFERRABLE=1;var Sc={};q("lf.Order",Sc);Sc.DESC=0;Sc.ASC=1;var Tc={};q("lf.Type",Tc);Tc.ARRAY_BUFFER=0;Tc.BOOLEAN=1;Tc.DATE_TIME=2;Tc.INTEGER=3;Tc.NUMBER=4;Tc.STRING=5;Tc.OBJECT=6;var Vc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};q("lf.type.DEFAULT_VALUES",Vc);function C(a,b){this.code=a;this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c]).slice(0,64))}r(C,Error);function Wc(){this.l=x();this.size=0}m=Wc.prototype;m.has=function(a){return this.l.has(a)};m.set=function(a,b){var c=this.l.get(a)||null;null===c&&(c=A(),this.l.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Wb=function(a,b){var c=this.l.get(a)||null;null===c&&(c=A(),this.l.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.$d=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Wb(b,c)},this);return this};
m.delete=function(a,b){var c=this.l.get(a)||null;if(null===c)return!1;if(b=c.delete(b))--this.size,0==c.size&&this.l.delete(a);return b};m.get=function(a){a=this.l.get(a)||null;return null===a?null:B(a)};m.clear=function(){this.l.clear();this.size=0};m.keys=function(){return Zb(this.l)};m.values=function(){var a=[];this.l.forEach(function(b){a.push.apply(a,B(b))});return a};function Xc(a){this.C=a.b(qc);this.g=a.b(uc);this.V=a.b(pc);this.Zc=null}function Yc(a,b,c){var d=b.Mb.wg;c.forEach(function(a){d.forEach(function(b){if(null==a.m[b.getName()])throw new C(202,b.j());},this)},a)}function Zc(a,b,c,d){b.Mb.Td.forEach(function(a){a.timing==d&&$c(this,a,c)},a)}function $c(a,b,c){var d=ad(a,b);c.forEach(function(a){if(bd(a[0],a[1],b.name)&&(a=a[1].nb(b.name),null!==a&&!d.Pa(a)))throw new C(203,b.name);},a)}
function ad(a,b){null===a.Zc&&(a.Zc=x());var c=a.Zc.get(b.name)||null;null===c&&(c=a.g.table(b.Xa)[b.Jc].Ca(),c=a.C.get(c.j()),a.Zc.set(b.name,c));return c}function bd(a,b,c){return(null===a?null!==b:null===b)||a.nb(c)!=b.nb(c)}function cd(a,b,c,d){b=dd(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&ed(a,b,c,function(a,b,c){if(b.Pa(c))throw new C(203,a.name);}))}
function fd(a,b,c){b=dd(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Wc;ed(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Wb(a.Fe,b)});return d}function gd(a,b,c){var d=new Wc;ed(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Rd:a,Bg:k[1]})})});return d}function ed(a,b,c,d){b.forEach(function(a){var b=this.C.get(a.name),h=ad(this,a);c.forEach(function(c){if(bd(c[0],c[1],h.getName())){var n=c[0].nb(h.getName());d(a,b,n,c)}},this)},a)}
function hd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Zc(a,b,c,d))}function id(a,b,c,d){0!=c.length&&(Zc(a,b,c,d),cd(a,b,c,d))}function jd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),cd(a,b,c,d))}
function kd(a,b,c){var d={te:[],qf:new Wc},e=new Wc;e.Wb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Wc;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.V.get(a),null]},this);b=fd(this,b,a);null!==b&&(d.te.unshift.apply(d.te,b.keys()),f.$d(b))},a);e=f;d.qf.$d(e)}while(0<e.size);return d};function ld(a){this.wa=x();this.ma=x();this.xa=x();this.A=a}m=ld.prototype;m.getName=g("A");m.add=function(a){if(this.xa.has(a.id())){var b=[this.xa.get(a.id()),a];this.ma.set(a.id(),b);this.xa.delete(a.id())}else this.wa.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.wa.has(c)?this.wa.set(c,b):(this.ma.has(c)&&(a=[this.ma.get(a[0].id())[0],b]),this.ma.set(c,a))};
m.delete=function(a){if(this.wa.has(a.id()))this.wa.delete(a.id());else if(this.ma.has(a.id())){var b=this.ma.get(a.id())[0];this.ma.delete(a.id());this.xa.set(a.id(),b)}else this.xa.set(a.id(),a)};m.$d=function(a){a.wa.forEach(function(a){this.add(a)},this);a.ma.forEach(function(a){this.modify(a)},this);a.xa.forEach(function(a){this.delete(a)},this)};
function Nc(a){var b=[];a.wa.forEach(function(a){b.push([null,a])});a.ma.forEach(function(a){b.push(a)});a.xa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Zb(this.wa).toString()+"], ["+Zb(this.ma).toString()+"], ["+Zb(this.xa).toString()+"]"};function md(a){var b=new ld(a.A);a.wa.forEach(function(a){b.delete(a)});a.xa.forEach(function(a){b.add(a)});a.ma.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.hd=function(){return 0==this.wa.size&&0==this.xa.size&&0==this.ma.size};function nd(a,b){this.aa=x();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.b(uc);this.V=a.b(pc);this.C=a.b(qc);this.Aa=new Xc(a);this.fd=new Kc(a);this.hb=x()}function mc(a){var b=[];Zb(a.hb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Cb()&&(a.Da().forEach(function(a){b.push(this.C.get(a.j()))},this),b.push(this.C.get(a.getName()+".#")))},a);return b}m=nd.prototype;m.da=g("aa");
m.Ab=function(a,b){od(this,a);Yc(this.Aa,a,b);hd(this.Aa,a,b,0);for(var c=0;c<b.length;c++)pd(this,a,[null,b[c]])};function pd(a,b,c){var d=b.getName(),e=a.hb.get(d)||new ld(d);a.hb.set(d,e);try{Oc(a.fd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.V.set(d,f),e.add(f)):null!==b&&null!==f?(a.V.set(d,f),e.modify(c)):null!==b&&null===f&&(a.V.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){od(this,a);Yc(this.Aa,a,b);b=b.map(function(a){return[this.V.get(a.id()),a]},this);qd(this,a,b);id(this.Aa,a,b,0);b.forEach(function(b){pd(this,a,b)},this)};m.Vd=function(a,b){od(this,a);Yc(this.Aa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Mb.rd;if(null===h)f=null;else{f=this.Aa;var h=h.j(),k=d.nb(h);f=f.C.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.V.get(f),d.sa=f,id(this.Aa,a,[[e,d]],0)):hd(this.Aa,a,[d],0);pd(this,a,[e,d])}};
m.remove=function(a,b){od(this,a);rd(this,a,b);jd(this.Aa,a,b,0);for(var c=0;c<b.length;c++)pd(this,a,[b[c],null])};function qd(a,b,c){b=dd(a.g.info(),b.getName(),1);if(null!==b){var d=gd(a.Aa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Rd.Fe),d=this.V.get(a),n=c.kb(d.Ja());n.m[b.Rd.vb]=b.Bg.m[b.Rd.Jc];pd(this,c,[d,n])},this)},a)}}
function rd(a,b,c){if(null!==dd(a.g.info(),b.getName(),1)){b=kd(a.Aa,b,c);var d=b.qf;b.te.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.V.get(a)},this);jd(this.Aa,b,a,0);a.forEach(function(a){pd(this,b,[a,null])},this)},a)}}function ic(a){a.hb.forEach(function(a){var c=this.aa.get(a.getName());hd(this.Aa,c,y(a.wa),1);jd(this.Aa,c,y(a.xa),1);id(this.Aa,c,y(a.ma),1)},a)}m.ka=aa();m.Jb=function(){var a=y(this.hb).map(function(a){return md(a)});this.fd.update(a)};
function od(a,b){if(!a.aa.has(b.getName()))throw new C(106,b.getName());};function D(a,b,c,d){this.from=a;this.o=b;this.ea=this.from==E?!1:c;this.oa=this.o==E?!1:d}var E=new (aa());D.prototype.toString=function(){return(this.ea?"(":"[")+(this.from==E?"unbound":this.from)+", "+(this.o==E?"unbound":this.o)+(this.oa?")":"]")};function sd(a){if(td(a))return[];var b=null,c=null;a.from==E||(b=new D(E,a.from,!1,!a.ea));a.o==E||(c=new D(a.o,E,!a.oa,!1));return[b,c].filter(function(a){return null!==a})}D.prototype.reverse=function(){return new D(this.o,this.from,this.oa,this.ea)};
function ud(a,b){var c=vd(a.from,b.from,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b;a=1==c?a:b;return d.o==E||d.o>a.from||d.o==a.from&&!d.oa&&!a.ea}function wd(){return new D(E,E,!1,!1)}function td(a){return a.from==E&&a.o==E}function xd(a){return a.from==a.o&&a.from!=E&&!a.ea&&!a.oa}D.prototype.contains=function(a){var b=this.o==E||a<this.o||a==this.o&&!this.oa;return(this.from==E||a>this.from||a==this.from&&!this.ea)&&b};
function vd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==E?b==E?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==E?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function yd(a,b){var c=vd(a.from,b.from,!0,a.ea,b.ea);0==c&&(c=vd(a.o,b.o,!1,a.oa,b.oa));return c}function zd(a){if(0==a.length)return[];a.sort(yd);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new D(E,a[c].from,!1,!0):c==b.length-1?new D(a[c-1].o,E,!0,!1):new D(a[c-1].o,a[c].from,!0,!0);return b};function Ad(a){this.kc=[];p(a)&&this.add(a)}Ad.prototype.toString=function(){return this.kc.map(function(a){return a.toString()}).join(",")};Ad.prototype.Pa=function(a){return this.kc.some(function(b){return b.contains(a)})};Ad.prototype.ra=g("kc");
Ad.prototype.add=function(a){if(0!=a.length)if(a=this.kc.concat(a),1==a.length)this.kc=a;else{a.sort(yd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(ud(c,a[d])){var e=a[d],f=wd();if(c.from!=E&&e.from!=E){var h=vd(c.from,e.from,!0);1!=h?(f.from=c.from,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.from=e.from,f.ea=e.ea)}c.o!=E&&e.o!=E&&(h=vd(c.o,e.o,!1),-1!=h?(f.o=c.o,f.oa=0!=h?c.oa:c.oa&&e.oa):(f.o=e.o,f.oa=e.oa));c=f}else b.push(c),c=a[d];b.push(c);this.kc=b}};
function Bd(a,b){var c=[];a.ra().map(function(a){return b.ra().map(function(b){var c;if(ud(a,b)){c=wd();var h=vd(a.from,b.from,!0),h=0==h?a.ea?a:b:-1!=h?a:b;c.from=h.from;c.ea=h.ea;a.o==E||b.o==E?b=a.o==E?b:a:(h=vd(a.o,b.o,!1),b=0==h?a.oa?a:b:-1==h?a:b);c.o=b.o;c.oa=b.oa}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new Ad(c.filter(function(a){return null!==a}))};function G(a,b){this.entries=a;this.M=A(b);this.$a=null}G.prototype.u=function(){return B(this.M)};function Cd(a){return a.entries.map(function(a){return a.va.m})}function Dd(a){return a.entries.map(function(a){return a.va.id()})}function Ed(a,b){return a.$a.get(b.j())}var Fd=null;function Gd(){null===Fd&&(Fd=new G([],[]));return Fd}
function Hd(a){if(0==a.length)return Gd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=x();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=x(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(y(e),B(a[0].M))}function Id(a){if(0==a.length)return Gd();var b=x();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(y(b),B(a[0].M))}
function Jd(a,b){var c=1<b.length;a=a.map(function(a){return new Kd(a,c)});return new G(a,b)}function Kd(a,b){this.va=a;this.id=Ld++;this.Xd=b}var Ld=0;function H(a,b){var c=b.Ka;return null!==c&&a.va.m.hasOwnProperty(c)?a.va.m[c]:a.Xd?a.va.m[Md(b.H())][b.getName()]:a.va.m[b.getName()]}function Nd(a,b,c){var d=b.Ka;if(null!=d)a.va.m[d]=c;else if(a.Xd){var d=Md(b.H()),e=a.va.m[d];null==e&&(e={},a.va.m[d]=e);e[b.getName()]=c}else a.va.m[b.getName()]=c}
function Od(a,b,c,d){function e(a,b){if(a.Xd){a=a.va.m;for(var c in a)f[c]=a[c]}else f[b[0]]=a.va.m}var f={};e(a,b);e(c,d);a=new $b(-1,f);return new Kd(a,!0)};q("lf.bind",function(a){return new Pd(a)});function Pd(a){this.fa=a}q("lf.Binder",Pd);Pd.prototype.Ca=g("fa");function Qd(){this.Ye=Rd();var a=Sd();this.Ob=x();this.Ob.set(1,Td());this.Ob.set(2,Ud());this.Ob.set(4,a);this.Ob.set(3,a);this.Ob.set(5,Vd());this.Ob.set(6,Wd())}var Xd;function Yd(){null!=Xd||(Xd=new Qd);return Xd}function Zd(a,b,c){a=a.Ob.get(b)||null;if(null===a)throw new C(550);c=a.get(c)||null;if(null===c)throw new C(550);return c}
function Rd(){function a(a){return a}var b=x();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}function Td(){var a=x();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Sd(){var a=Td();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Vd(){var a=Sd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}function Wd(){var a=x();a.set("eq",function(a,c){if(null!==c)throw new C(550);return null===a});a.set("neq",function(a,c){if(null!==c)throw new C(550);return null!==a});return a}
function Ud(){var a=x();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function I(){this.h=this.D=null}var $d=[];I.prototype.getParent=g("D");I.prototype.ab=function(){for(var a=this;null!==a.getParent();)a=a.getParent();return a};function ae(a){for(var b=0;null!==a.getParent();)b++,a=a.getParent();return b}function J(a){return a.h||$d}function be(a,b){return J(a)[b]||null}function ce(a,b,c){b.D=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function K(a,b){b.D=a;null===a.h?a.h=[b]:a.h.push(b)}
function de(a,b){var c=a.h&&a.h[b];return c?(c.D=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}I.prototype.removeChild=function(a){return de(this,J(this).indexOf(a))};function ee(a,b,c){be(a,c).D=null;b.D=a;a.h[c]=b}function fe(a,b,c){!1!==b.call(c,a)&&J(a).forEach(function(a){fe(a,b,c)})};function ge(){I.call(this);this.sa=he++}r(ge,I);var he=0;ge.prototype.W=g("sa");function ie(a,b,c){ge.call(this);this.J=a;this.value=b;this.F=c;this.vc=Zd(Yd(),this.J.I(),this.F);this.Wa=!1;this.cc=b}r(ie,ge);m=ie.prototype;m.Nb=function(){var a=new ie(this.J,this.value,this.F);a.cc=this.cc;a.ud(this.Wa);var b=this.W();a.sa=b;return a};m.lb=function(a){return null!=a?(a.push(this.J),a):[this.J]};m.u=function(a){a=null!=a?a:A();a.add(this.J.H());return a};m.ud=ba("Wa");
function je(a){var b=!1;a.value instanceof Pd||(b="array"==fa(a.value)?!a.value.some(function(a){return a instanceof Pd}):!0);if(!b)throw new C(501);}m.eval=function(a){je(this);if("in"==this.F)return ke(this,a);var b=a.entries.filter(function(a){return this.vc(H(a,this.J),this.value)!=this.Wa},this);return new G(b,a.u())};
m.bind=function(a){if(this.cc instanceof Pd){var b=this.cc.Ca();if(a.length<=b)throw new C(510);this.value=a[b]}else"array"==fa(this.cc)&&(this.value=this.cc.map(function(b){if(b instanceof Pd){var d=b.Ca();if(a.length<=d)throw new C(510);return a[b.Ca()]}return b}))};function ke(a,b){var c=A(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Wa}.bind(a);a=b.entries.filter(function(a){return d(H(a,this.J))},a);return new G(a,b.u())}
m.toString=function(){return"value_pred("+this.J.j()+" "+this.F+(this.Wa?"(complement)":"")+" "+this.value+")"};m.kd=function(){je(this);return null!==this.value&&("between"==this.F||"in"==this.F||"eq"==this.F||"gt"==this.F||"gte"==this.F||"lt"==this.F||"lte"==this.F)};
m.ve=function(){var a=null;if("between"==this.F)a=new D(le(this,this.value[0]),le(this,this.value[1]),!1,!1);else{if("in"==this.F)return a=this.value.map(function(a){return new D(a,a,!1,!1)}),new Ad(this.Wa?zd(a):a);a=le(this,this.value);a="eq"==this.F?new D(a,a,!1,!1):"gte"==this.F?new D(a,E,!1,!1):"gt"==this.F?new D(a,E,!0,!1):"lte"==this.F?new D(E,a,!1,!1):new D(E,a,!1,!0)}return new Ad(this.Wa?sd(a):[a])};function le(a,b){return 2==a.J.I()?b.getTime():b};function me(a){this.ba=a;this.Wc=this.Ga=null}function ne(a,b){null===a.Ga&&null!=a.w&&(a.Ga=oe(a.w));return a.Ga.get(b)||null}function oe(a){var b=x();fe(a,function(a){b.set(a.W(),a)});return b}function qe(a,b){b.w&&(a.w=b.w.Nb());a.Wc=b}me.prototype.bind=function(){return this};function re(a,b){a=a.w;null!=a&&fe(a,function(a){a instanceof ie&&a.bind(b)})};function se(a){me.call(this,a)}r(se,me);function te(a){var b="";a.forEach(function(c,d){b+=c.J.j()+" ";b+=1==c.order?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}se.prototype.da=function(){return A(this.from)};se.prototype.clone=function(){var a=new se(this.ba);qe(a,this);this.f&&(a.f=this.f.slice());this.from&&(a.from=this.from.slice());a.X=this.X;a.L=this.L;this.N&&(a.N=this.N.slice());this.la&&(a.la=this.la.slice());this.Sb&&(a.Sb=this.Sb);this.Zb&&(a.Zb=this.Zb);a.cb=this.cb;return a};
se.prototype.bind=function(a){se.gb.bind.call(this,a);null!=this.Sb&&(this.X=a[this.Sb.Ca()]);null!=this.Zb&&(this.L=a[this.Zb.Ca()]);re(this,a);return this};function ue(a,b){this.Ha=a;this.aa=b}ue.prototype.ab=g("Ha");ue.prototype.da=g("aa");function ve(a){var b=A();a.forEach(function(a){a.da().forEach(b.add.bind(b))});return b};function we(a,b){this.global=a;this.Oa=a.b(oc);this.sd=b.map(function(a){return a.context});this.hf=b.map(function(a){return a.he});this.Ld=ve(this.hf);this.we=xe(this);this.Db=eb()}function xe(a){return a.sd.some(function(a){return!(a instanceof se)})?1:0}m=we.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.ab().exec(b,h).then(function(b){c.push(b[0]);return a()})}return v()}var b=0==this.we?void 0:new nd(this.global,this.Ld),c=[],d=this.hf.slice(),e=this.sd;return a().then(function(){this.ja=this.Oa.Fb(this.we,B(this.Ld),b);return this.ja.ka()}.bind(this)).then(function(){this.ee(c);return c}.bind(this),function(a){null!=b&&b.Jb();throw a;})};m.I=g("we");m.da=g("Ld");m.W=function(){return ka(this)};m.ee=aa();
m.Y=function(){var a=null;null!=this.ja&&(a=this.ja.Y());return null===a?new z(!1,0,0,0,0):a};function ye(a,b){we.call(this,a,b);this.Ib=a.b(tc)}r(ye,we);ye.prototype.getPriority=l(0);ye.prototype.ee=function(a){this.sd.forEach(function(b,c){ze(this.Ib,b,a[c])},this)};function Ae(a,b){this.c=a;this.Ib=a.b(tc);this.Ia=a.b(sc);this.fd=new Kc(a);this.hb=b;var c=a.b(uc);a=this.hb.map(function(a){return c.table(a.getName())});this.aa=A(a);this.Db=eb()}m=Ae.prototype;m.exec=function(){this.fd.update(this.hb);this.Mc();return v()};m.I=l(1);m.da=g("aa");m.W=function(){return ka(this)};m.getPriority=l(1);m.Mc=function(){var a=Be(this.Ib,this.aa);0!=a.length&&(a=new ye(this.c,a),Ce(this.Ia,a))};function De(a){this.c=a;this.Oa=a.b(oc);this.Ia=a.b(sc)}De.prototype.ce=function(a){a=new Ae(this.c,a);Ce(this.Ia,a)};function L(a,b){this.Ua=a;this.i=b;this.Za=x()}q("lf.backstore.FirebaseRawBackStore",L);L.prototype.bd=g("i");L.prototype.cd=function(){throw new C(351);};function Ee(a,b){var c=eb(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function Fe(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=eb();c?a.set(b,d):a.update(b,d);return e.ha}
L.prototype.Ea=function(a){return Ee(this.i,"@rev/R").then(function(a){this.Sa=a;return Ee(this.i,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Za.set(d,b[d]),b[d]>c&&(c=b[d]);a.pa().forEach(function(a){this.Za.has(a.getName())||(b[a.getName()]=++c)},this);d=this.i.child("@table");return Fe(d,b)}.bind(this))};
function Ge(a,b,c){var d=a.Za.get(b);return null!=d?function(){var a={},b=eb();this.i.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Sa};return Fe(this.i,a)}.bind(a)):v()}L.prototype.tc=function(a){return Ge(this,a,l(null)).then(function(){this.Za.delete(a);return Fe(this.i.child("@table/"+a),null,!0)}.bind(this))};L.prototype.dropTable=L.prototype.tc;
L.prototype.qc=function(a,b,c){return Ge(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Sa+1,T:a.T,P:e}}.bind(this))};L.prototype.addTableColumn=L.prototype.qc;L.prototype.uc=function(a,b){return Ge(this,a,function(a){var d=a.P;delete d[b];return{R:this.Sa+1,T:a.T,P:d}}.bind(this))};L.prototype.dropTableColumn=L.prototype.uc;L.prototype.Lc=function(a,b,c){return Ge(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Sa+1,T:a.T,P:e}}.bind(this))};L.prototype.renameTableColumn=L.prototype.Lc;
L.prototype.xb=function(){throw new C(351);};L.prototype.createRow=L.prototype.xb;L.prototype.Cc=g("Ua");L.prototype.getVersion=L.prototype.Cc;L.prototype.ec=function(a){var b=eb();a=this.Za.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ha};L.prototype.dump=function(){var a={},b=Zb(this.Za).map(function(b){return this.ec(b).then(function(d){a[b]=d})}.bind(this));return db(b).then(function(){return a})};
L.prototype.dump=L.prototype.dump;function He(a,b,c){gc.call(this,b,c);this.i=a}r(He,gc);He.prototype.H=function(a){return this.i.Ac(a)};
He.prototype.sc=function(){if(0==this.xd)return this.S.resolve(),this.S.ha;var a=this.Ra.hb;if(0==a.size)this.S.resolve();else{var b=this.i.Sa+1;this.i.Sa=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.i.Za.get(e);a.wa.forEach(function(a,d){c[d]={R:b,T:f,P:a.m}});a.ma.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].m}});a.xa.forEach(function(a,b){c[b]=null})},this);this.i.i.update(c,function(c){null===c?this.S.resolve():(this.i.Sa=b-1,c=y(a).map(function(a){return Ie(this.i,a.getName())},this),
db(c).then(this.S.reject.bind(this.S),this.S.reject.bind(this.S)))}.bind(this))}return this.S.ha};function Je(){this.Ba=x()}function Ke(a,b){if(0==b.length)return y(a.Ba);var c=[];b.forEach(function(a){a=this.Ba.get(a)||null;null===a||c.push(a)},a);return c}Je.prototype.getData=g("Ba");Je.prototype.get=function(a){return v(Ke(this,a))};function Le(a,b){b.forEach(function(a){this.Ba.set(a.id(),a)},a)}Je.prototype.put=function(a){Le(this,a);return v()};function Me(a,b){0==b.length||b.length==a.Ba.size?a.Ba.clear():b.forEach(function(a){this.Ba.delete(a)},a)}
Je.prototype.remove=function(a){Me(this,a);return v()};function Ne(a){return 0==a.Ba.size?0:Zb(a.Ba).reduce(function(a,c){return a>c?a:c},0)};function Oe(a,b){this.g=a;this.Cf=b;this.Kc=x();this.Sa=-1;this.M=x();this.Za=x();this.Id=null}m=Oe.prototype;
m.Ea=function(a){this.i=this.Cf.child(this.g.name());var b=a||function(){return v()};return Ee(this.i,"@db/version").then(function(a){return null===a?Fe(this.i,Pe(this),!0).then(function(){var a=new L(0,this.i);return b(a)}.bind(this)).then(function(){return this.Ea()}.bind(this)):a==this.g.version()?Ee(this.i,"@rev/R").then(function(a){this.Sa=a;return Ee(this.i,"@table")}.bind(this)).then(function(a){for(var b in a)this.Za.set(b,a[b]);a=this.g.pa().map(function(a){return Ie(this,a.getName())},this);
return db(a)}.bind(this)).then(function(){Qe(this);Re(this);return v()}.bind(this)):this.fe(a,b).then(function(){return this.Ea()}.bind(this))}.bind(this))};m.fe=function(a,b){var c=new L(a,this.i);return c.Ea(this.g).then(function(){return v()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.i.child("@db");return Fe(a,{version:this.g.version()},!0)}.bind(this))};
function Re(a){a.i.off();a.i.on("child_removed",a.yg.bind(a));a.Jd&&(a.Jd.off(),a.Kc.clear());a.Jd=a.i.orderByChild("R").startAt(a.Sa+1);a.Jd.on("value",a.ce.bind(a))}function Qe(a){ac=y(a.M).map(function(a){return Ne(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.yg=function(a){var b=a.val(),c=this.Kc.get(b.T)||null;null===c&&(c=A(),this.Kc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.ce=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Sa&&(this.Sa=b,a=Se(this,a),a.forEach(function(a){var b=this.M.get(a.getName()),e=Zb(a.xa);0<e.length&&Me(b,e);var f=y(a.wa);a.ma.forEach(function(a){f.push(a[1])});Le(b,f)},this),0<a.length&&this.Gc(a),Re(this))};
function Se(a,b){var c=A(),d=x();a.Za.forEach(function(a,b){var h=this.M.get(b),k=new ld(b);this.Kc.has(a)&&(b=B(this.Kc.get(a)),b.forEach(function(a){c.add(a)}),Ke(h,b).forEach(function(a){k.delete(a)}));d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var h=a.val();a=d.get(h.T);var k=this.M.get(a.getName()),h=this.g.table(a.getName()).kb({id:b,value:h.P});k.getData().has(b)?a.modify([Ke(k,[b])[0],h]):a.add(h)}}}.bind(a));return y(d).filter(function(a){return!a.hd()})}
function Ie(a,b){var c=eb(),d=a.Za.get(b),e=a.g.table(b);a.i.orderByChild("T").equalTo(d).once("value",function(a){var d=new Je,k=[];a.forEach(function(a){k.push(e.kb({id:parseInt(a.key(),10),value:a.val().P}))});Le(d,k);this.M.set(b,d);c.resolve()}.bind(a));return c.ha}function Pe(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Sa=1;b["@table"]={};a.g.pa().forEach(function(a,d){a=a.getName();b["@table"][a]=d;this.M.set(a,new Je);this.Za.set(a,d)},a);return b}
m.Fb=function(a,b,c){return new He(this,a,c)};m.Ac=function(a){var b=this.M.get(a)||null;if(null!==b)return b;throw new C(101,a);};m.close=aa();m.subscribe=ba("Id");m.Gc=function(a){null!=this.Id&&this.Id(a)};function M(a,b,c,d){this.i=b;this.ja=c;this.Ua=a;this.Uc=d}q("lf.backstore.IndexedDBRawBackStore",M);M.prototype.bd=g("i");M.prototype.getRawDBInstance=M.prototype.bd;M.prototype.cd=g("ja");M.prototype.getRawTransaction=M.prototype.cd;M.prototype.tc=function(a){return new u(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};M.prototype.dropTable=M.prototype.tc;
function Te(a,b,c,d){return new u(function(a,f){var h;try{var k=this.ja.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Ue(a){return a instanceof ArrayBuffer?dc(a):a instanceof Date?a.getTime():a}
function Ve(a,b,c){function d(a){var b=Fc(a.value),d=b.m,e;for(e in d){var F=bc(d[e]);c(F);d[e]=F.Ja()}a.update(b.Ja())}function e(a){var b=bc(a.value);c(b);a.update(b.Ja())}return Te(a,b,a.Uc?d:e,aa())}M.prototype.qc=function(a,b,c){var d=Ue(c);return Ve(this,a,function(a){a.m[b]=d})};M.prototype.addTableColumn=M.prototype.qc;M.prototype.uc=function(a,b){return Ve(this,a,function(a){delete a.m[b]})};M.prototype.dropTableColumn=M.prototype.uc;
M.prototype.Lc=function(a,b,c){return Ve(this,a,function(a){a.m[c]=a.m[b];delete a.m[b]})};M.prototype.renameTableColumn=M.prototype.Lc;function We(a,b){var c=[];return new u(function(a,e){var f;try{f=this.ja.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Uc){var e=Fc(b.value).m,n;for(n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}M.prototype.xb=function(a){var b={},c;for(c in a)b[c]=Ue(a[c]);return cc(b)};
M.prototype.createRow=M.prototype.xb;M.prototype.Cc=g("Ua");M.prototype.getVersion=M.prototype.Cc;M.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.ec(d))}return db(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};M.prototype.dump=M.prototype.dump;M.prototype.ec=function(a){return We(this,a).then(function(a){return a.map(function(a){return a.value})})};function Xe(a,b){this.Z=a;this.Gb=b}Xe.prototype.get=function(a){if(0==a.length)return null!=this.Z.getAll?Ye(this):Ze(this);a=a.map(function(a){return new u(function(c,d){var e;try{e=this.Z.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Gb(a.target.result))}.bind(this)},this)},this);return db(a)};
function Ze(a){return new u(function(a,c){var d=[],e;try{e=this.Z.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(d.push(this.Gb(c.value)),c.continue()):a(d)}.bind(this)},a)}function Ye(a){return new u(function(a,c){var d;try{d=this.Z.getAll()}catch(e){c(e);return}d.onerror=c;d.onsuccess=function(){var c=d.result.map(function(a){return this.Gb(a)},this);a(c)}.bind(this)},a)}
Xe.prototype.Tb=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Xe.prototype.put=function(a){if(0==a.length)return v();a=a.map(function(a){return this.Tb(function(){return this.Z.put(a.Ja())}.bind(this))},this);return db(a)};
Xe.prototype.remove=function(a){return new u(function(b,c){var d=this.Z.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Tb(function(){return this.Z.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Tb(function(){return this.Z.delete(a)}.bind(this))},this);db(d).then(b,c)}.bind(this);d.onerror=c},this)};function $e(a,b,c,d,e){gc.call(this,c,e);this.c=a;this.ja=b;this.Uc=d;this.ja.oncomplete=this.S.resolve.bind(this.S);this.ja.onabort=this.S.reject.bind(this.S)}r($e,gc);$e.prototype.H=function(a,b,c){return this.Uc?(c=null!=c?c:0,a=this.ja.objectStore(a),new Gc(a,b,0==c?qa(Ic,this.c):Jc)):new Xe(this.ja.objectStore(a),b)};$e.prototype.sc=function(){return this.S.ha};function af(a,b){this.c=a;this.g=b;this.Fd=b.ie.Rf||!1}m=af.prototype;
m.Ea=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new C(352);var c=a||function(){return v()};return new u(function(a,e){var f;try{f=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}f.onerror=function(a){a=a.target.error;e(new C(361,a.name,a.message))};f.onupgradeneeded=function(a){bf(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.i=b.target.result;this.pe().then(function(b){ac=b+1;a(this.i)}.bind(this))}.bind(this)},
this)};function bf(a,b,c){var d=c.target.result;c=new M(c.oldVersion,d,c.target.transaction,a.Fd);cf(d);a.g.pa().forEach(qa(a.Kf,d),a);return b(c)}function cf(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Kf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Cb()&&(b.Da().forEach(function(b){df(a,b.j())},this),df(a,ef(b)))};function df(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Fb=function(a,b,c){b=this.i.transaction(ff(b),0==a?"readonly":"readwrite");return new $e(this.c,b,a,this.Fd,c)};
function ff(a){var b=A();a.forEach(function(a){b.add(a.getName());a.Cb()&&(a.Da().forEach(function(a){b.add(a.j())}),b.add(ef(a)))});return B(b)}
m.pe=function(a){function b(){if(0==d.length)return v();var a=d.shift();return c(a).then(b)}function c(b){return new u(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ea){d(ea);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.g.pa().map(function(a){return a.getName()}),e=this.i,f=0,h=function(a){return this.Fd?(a=Fc(a.value),Object.keys(a.m).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new u(function(a){b().then(function(){a(f)})})};m.close=function(){this.i.close()};m.Ac=function(){throw new C(511);};m.subscribe=aa();m.Gc=aa();function gf(a,b,c){gc.call(this,b,c);this.Z=a;0==b&&this.S.resolve()}r(gf,gc);gf.prototype.H=function(a){return this.Z.Ac(a)};gf.prototype.sc=function(){this.S.resolve();return this.S.ha};function hf(a){this.g=a;this.M=x()}m=hf.prototype;m.Ea=function(){this.g.pa().forEach(this.fg,this);return v()};m.Ac=function(a){var b=this.M.get(a)||null;if(null===b)throw new C(101,a);return b};m.Fb=function(a,b,c){return new gf(this,a,c)};function jf(a,b){if(!a.M.has(b)){var c=new Je;a.M.set(b,c)}}m.fg=function(a){jf(this,a.getName());a.Cb()&&(a.Da().forEach(function(a){jf(this,a.j())},this),jf(this,ef(a)))};m.close=aa();m.subscribe=aa();m.Gc=aa();function kf(a){hf.call(this,a);this.od=null}r(kf,hf);kf.prototype.subscribe=function(a){null===this.od&&(this.od=a)};kf.prototype.Gc=function(a){null===this.od||this.od(a)};function mf(a,b,c){this.ja=a;this.A='"'+b+'"';this.Gb=c}mf.prototype.get=function(a){var b=this.Gb;return nf(this.ja,"SELECT id, value FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
mf.prototype.put=function(a){if(0==a.length)return v();var b="INSERT OR REPLACE INTO "+this.A+"(id, value) VALUES (?, ?)";a.forEach(function(a){nf(this.ja,b,[a.id(),JSON.stringify(a.m)])},this);return v()};mf.prototype.remove=function(a){nf(this.ja,"DELETE FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return v()};function of(a,b,c){gc.call(this,b,c);this.i=a;this.M=x();this.Md=[]}r(of,gc);function pf(a){return a.replace(".","__d__").replace("#","__s__")}of.prototype.H=function(a,b){var c=this.M.get(a)||null;null===c&&(c=new mf(this,pf(a),b),this.M.set(a,c));return c};function nf(a,b,c,d){var e=eb();a.Md.push({Mg:b,Cg:c,transform:d,S:e});return e.ha}
of.prototype.sc=function(){var a=null,b=this.S.reject.bind(this.S),c=function(a,b){this.S.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.S.resolve(k)}0<this.Md.length?(a=h=this.Md.shift(),b.executeSql(h.Mg,h.Cg,e,c)):this.S.resolve(d)}.bind(this);0==this.xd?this.i.readTransaction(e,b):this.i.transaction(e,b);return this.S.ha};function N(a,b,c){this.i=c;this.c=a;this.Ua=b}q("lf.backstore.WebSqlRawBackStore",N);N.prototype.bd=g("i");N.prototype.getRawDBInstance=N.prototype.bd;N.prototype.cd=function(){throw new C(356);};N.prototype.getRawTransaction=N.prototype.cd;function qf(a){return new of(a.i,1,new nd(a.c,A()))}N.prototype.tc=function(a){var b=qf(this);nf(b,"DROP TABLE "+a,[]);return b.ka()};N.prototype.dropTable=N.prototype.tc;
N.prototype.ec=function(a){var b=qf(this);nf(b,"SELECT id, value FROM "+a,[]);return b.ka().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return v(e)})};function rf(a,b,c){var d=qf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.ec(b).then(function(a){a.forEach(function(a){a=c(a);nf(d,e,[JSON.stringify(a.value),a.id])});return d.ka()})}
N.prototype.qc=function(a,b,c){var d=Ue(c);return rf(this,a,function(a){a.value[b]=d;return a})};N.prototype.addTableColumn=N.prototype.qc;N.prototype.uc=function(a,b){return rf(this,a,function(a){delete a.value[b];return a})};N.prototype.dropTableColumn=N.prototype.uc;N.prototype.Lc=function(a,b,c){return rf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};N.prototype.renameTableColumn=N.prototype.Lc;N.prototype.xb=function(a){var b={},c;for(c in a)b[c]=Ue(a[c]);return cc(b)};
N.prototype.createRow=N.prototype.xb;N.prototype.Cc=g("Ua");N.prototype.getVersion=N.prototype.Cc;function sf(a){nf(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
N.prototype.dump=function(){var a=eb(),b=qf(this);sf(b);var c={};b.ka().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.ec(a).then(function(b){c[a]=b})},this);db(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};N.prototype.dump=N.prototype.dump;function tf(a,b,c){this.c=a;this.g=b;this.Lg=c||1}m=tf.prototype;m.Ea=function(a){if(null==window.openDatabase)throw new C(353);var b=a||function(){return v()};return new u(function(a,d){var e=window.openDatabase(this.g.name(),"",this.g.name(),this.Lg);if(null!=e)this.i=e,uf(this,b).then(function(){this.pe().then(a,d)}.bind(this),function(a){if(a instanceof C)throw a;throw new C(354,a.message);});else throw new C(354);},this)};
function uf(a,b){var c=eb(),d=new of(a.i,1,new nd(a.c,A()));nf(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);nf(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ka().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.fe(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new C(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.ha}m.Fb=function(a,b,c){if(null!=this.i)return new of(this.i,a,c);throw new C(2);};m.close=aa();
m.Ac=function(){throw new C(512);};m.subscribe=function(){throw new C(355);};m.Gc=function(){throw new C(355);};m.fe=function(a,b){return vf(this).then(function(){return a(new N(this.c,b,this.i))}.bind(this))};
function vf(a){var b=a.g.pa(),c=new of(a.i,1,new nd(a.c,A())),d=new of(a.i,1,new nd(a.c,A()));nf(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);sf(c);return c.ka().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){nf(d,"DROP TABLE "+('"'+a+'"'),[])});var h=[],k=[],n=[];b.map(function(a){-1==c.indexOf(a.getName())&&h.push(a.getName());a.Cb&&(a.Da().forEach(function(a){a=pf(a.j());h.push(a);k.push(a)}),a=pf(ef(a)),h.push(a),n.push(a))});
h.forEach(function(a){nf(d,"CREATE TABLE "+('"'+a+'"')+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ka()})}m.pe=function(){var a=0,b=eb(),c=function(b){var c=new of(this.i,0);nf(c,"SELECT MAX(id) FROM "+('"'+b+'"'),[]);return c.ka().then(function(b){b=b[0].rows.item(0)["MAX(id)"];a=Math.max(b,a)})}.bind(this),d=this.g.pa().map(function(a){return c(a.getName())});db(d).then(function(){ac=a+1;b.resolve()},function(a){b.reject(a)});return b.ha};function wf(a){this.l=x();this.$b=x();a.pa().forEach(function(a){this.$b.set(a.getName(),A())},this)}m=wf.prototype;m.set=function(a,b){this.l.set(b.id(),b);this.$b.get(a).add(b.id())};m.Wb=function(a,b){var c=this.$b.get(a);b.forEach(function(a){this.l.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.l.get(a)||null};function xf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Va=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.$b.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.l.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.l.get(b),d.push(c));return d};m.remove=function(a,b){this.l.delete(b);this.$b.get(a).delete(b)};m.zc=function(a){return null!=a?this.$b.get(a).size:this.l.size};m.clear=function(){this.l.clear();this.$b.clear()};function yf(a,b,c){var d=0,e=a.length;for(c=c||zf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function zf(a,b){return a-b}function Af(a,b,c){c=yf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function Bf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(p(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Cf(){this.ia=0;this.Fc=null}Cf.prototype.add=function(a,b){this.ia+=b;this.Fc=null===this.Fc?a:a>this.Fc?a:this.Fc};Cf.prototype.remove=function(a,b){this.ia-=b};Cf.prototype.clear=function(){this.ia=0};function Df(a,b){a.clear();b.forEach(function(a){this.ia+=a.ia},a)};function Ef(a,b,c,d){this.A=a;this.$=b;this.xf=c;this.za=new Cf;if(d){a=511;a*=a*a;if(d.length>=a)throw new C(6,a);d=Ff(this,d);this.ua=d=Gf(d)}else this.clear()}var Hf=[];m=Ef.prototype;m.getName=g("A");m.toString=function(){return this.ua.toString()};m.add=function(a,b){this.ua=this.ua.Ab(a,b)};m.set=function(a,b){this.ua=this.ua.Ab(a,b,!0)};m.remove=function(a,b){this.ua=this.ua.remove(a,b)};m.get=function(a){return this.ua.get(a)};
m.Yc=function(a){if(null==a)return this.Y().ia;if(a instanceof D){if(td(a))return this.Y().ia;if(xd(a))return this.get(a.from).length}return this.Va([a]).length};m.Y=g("za");m.Ud=function(a,b,c,d){c=Array(a);this.ua.fill({offset:b?this.za.ia-a-d:d,count:a,se:0},c);return b?c.reverse():c};
m.Va=function(a,b,c,d){var e=If(this.ua).a[0];if(!p(e)||0==c)return Hf;b=b||!1;c=null!=c?Math.min(c,this.za.ia):this.za.ia;d=d||0;var f=Math.min(Math.max(this.za.ia-d,0),c);if(0==f)return Hf;if(!p(a)||1==a.length&&a[0]instanceof D&&td(a[0]))return this.Ud(f,b,c,d);a=this.$.tf(a);var h=Array(b?this.za.ia:f),k={count:0,X:h.length,reverse:b,L:d},n=1<this.jb().Yd();a.forEach(function(a){for(var b=this.$.td(a),b=this.$.Wd(a)?e:b[0],b=this.ua.Xf(b),c=0;null!=b&&k.count<k.X;){if(n){for(var d=b,f=a,ec=k,
Db=h,Uc=d.s.jb(),pe=-1,Ma=0;Ma<d.a.length;++Ma)if(Uc.Bb(d.a[Ma],f)){pe=Ma;break}if(-1!=pe)for(Ma=pe;Ma<d.a.length&&ec.count<ec.X;++Ma)Uc.Bb(d.a[Ma],f)&&Jf(d,ec,Db,Ma)}else b.Va(a,k,h);0!=k.L||b.jd(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?Bf(h,b,c,d):h};m.clear=function(){this.ua=Kf(this);this.za.clear()};m.Pa=function(a){return this.ua.Pa(a)};m.min=function(){return this.Hb(this.$.min.bind(this.$))};m.max=function(){return this.Hb(this.$.max.bind(this.$))};
function Lf(a,b,c){if(!a.$.Nd(b.a[c]))if(1<b.a[c].length){if(null===b.a[c][0])return null}else return null;return[b.a[c],a.xf?[b.B[c]]:b.B[c]]}m.Hb=function(a){var b;a:{b=If(this.ua);var c=0;do if(c>=b.a.length)b=b.ya,c=0;else{var d=Lf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Mf(this.ua);d=c.a.length-1;do if(0>d)c=c.qb,d=0;else{var e=Lf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ma=g("xf");m.jb=g("$");
m.Qa=function(a,b){return null!=a?0==this.$.compare(a,b):!1};m.Ja=function(){for(var a=[],b=If(this.ua);b;)a.push(new $b(b.sa,[b.a,b.B])),b=b.ya;return a};function Nf(a,b,c,d){a=new Ef(b,a,c);d=Of(d,a);a.ua=d;return a}function Pf(a,b){this.sa=a;this.s=b;this.mb=0;this.ya=this.qb=this.D=null;this.a=[];this.B=[];this.h=[];this.Xf=1==b.jb().Yd()?this.Oe:this.Ne}function Kf(a){return new Pf(ac++,a)}function P(a){return 0==a.mb}m=Pf.prototype;m.next=g("ya");
function Qf(a){function b(a){return null!=a?a.sa.toString():"_"}var c=a.sa+"["+a.a.join("|")+"]",d=a.h.map(function(a){return a.sa}).join("|"),e=a.B.join("/"),f=b(a.qb)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.D);a.ya&&(a=Qf(a.ya),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Qf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function If(a){return P(a)?a:If(a.h[0])}function Mf(a){return P(a)?a:Mf(a.h[a.h.length-1])}
function Rf(a,b){b&&(b.qb=a);a&&(a.ya=b)}function Ff(a,b){for(var c=b.length,d=0,e=a=Kf(a);0<c;){var f=768<=c?511:257<=c&&511>=c?c:257,h=b.slice(d,d+f);a.a=h.map(function(a){return a.key});a.B=h.map(function(a){return a.value});d+=f;c-=f;0<c&&(f=Kf(a.s),Rf(a,f),a=f)}return e}function Sf(a){var b=a[0],c=Kf(b.s);c.mb=b.mb+1;c.h=a;for(b=0;b<a.length;++b)a[b].D=c,0<b&&c.a.push(a[b].a[0]);return c}
function Gf(a){var b=a,c=[];do c.push(b),b=b.ya;while(b);if(512>=c.length)b=Sf(c);else{var d=c.length,e=0,b=Kf(a.s);for(b.mb=a.mb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Sf(f);h.D=b;b.h.length&&(b.a.push(f[0].a[0]),Rf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Tf(this,a);if(P(this)){var c=Hf;this.s.Qa(this.a[b],a)&&(c=c.concat(this.B[b]));return c}b=this.s.Qa(this.a[b],a)?b+1:b;return this.h[b].get(a)};
m.Pa=function(a){var b=Tf(this,a);return this.s.Qa(this.a[b],a)?!0:P(this)?!1:this.h[b].Pa(a)};m.remove=function(a,b){Uf(this,a,-1,b);return null===this.D?(a=this,1==this.h.length&&(a=this.h[0],a.D=null),a):this};function Vf(a){return P(a)?a.a[0]:Vf(a.h[0])}function Wf(a){a.a=[];for(var b=1;b<a.h.length;++b)a.a.push(Vf(a.h[b]))}
function Uf(a,b,c,d){var e=Tf(a,b),f=P(a);if(!f){var h=a.s.Qa(a.a[e],b)?e+1:e;if(Uf(a.h[h],b,h,d))Wf(a);else return!1}else if(!a.s.Qa(a.a[e],b))return!1;if(a.a.length>e&&a.s.Qa(a.a[e],b)){if(p(d)&&!a.s.Ma()&&f&&(h=a.B[e],d=yf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.s.Y().remove(b,1),a.B[e].length))return!1;a.a.splice(e,1);f&&(f=a.s.Ma()?1:a.B[e].length,a.B.splice(e,1),a.s.Y().remove(b,f))}if(256>a.a.length&&null!==a.D){a:{if(a.ya&&256<a.ya.a.length)b=a.ya,e=d=0,f=a.a.length+1;else if(a.qb&&
256<a.qb.a.length)b=a.qb,d=a.qb.a.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.a.splice(f,0,b.a[d]);b.a.splice(d,1);d=P(a)?a.B:a.h;P(a)?h=b.B:(h=b.h,h[e].D=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(Wf(b),Wf(a));b=!0}b||Xf(a,c)}return!0}
function Xf(a,b){var c,d,e;a.ya&&511>a.ya.a.length?(c=a.ya,e=d=0):a.qb&&(c=a.qb,d=c.a.length,e=P(c)?c.B.length:c.h.length);d=[d,0].concat(a.a);Array.prototype.splice.apply(c.a,d);d=null;P(a)?d=a.B:(d=a.h,d.forEach(function(a){a.D=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.B:c.h,d);Rf(a.qb,a.ya);P(c)||Wf(c);-1!=b&&(a.D.a.splice(b,1),a.D.h.splice(b,1))}
m.Ab=function(a,b,c){var d=Tf(this,a);if(P(this)){if(this.s.Qa(this.a[d],a)){if(c)this.s.Y().remove(a,this.s.Ma()?1:this.B[d].length),this.B[d]=this.s.Ma()?b:[b];else{if(this.s.Ma())throw new C(201,this.s.getName(),JSON.stringify(a));if(!Af(this.B[d],b))throw new C(109);}this.s.Y().add(a,1);return this}this.a.splice(d,0,a);this.B.splice(d,0,this.s.Ma()?b:[b]);this.s.Y().add(a,1);512==this.a.length?(d=Kf(this.s),a=Kf(this.s),a.mb=1,a.a=[this.a[256]],a.h=[this,d],a.D=this.D,this.D=a,d.a=this.a.splice(256),
d.B=this.B.splice(256),d.D=a,Rf(d,this.ya),Rf(this,d),d=a):d=this;return d}d=this.s.Qa(this.a[d],a)?d+1:d;a=this.h[d].Ab(a,b,c);P(a)||1!=a.a.length||(this.a.splice(d,0,a.a[0]),a.h[1].D=this,a.h[0].D=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.a.length?Yf(this):this};
function Yf(a){var b=Kf(a.s),c=Kf(a.s);b.D=a.D;b.mb=a.mb+1;b.a=[a.a[256]];b.h=[a,c];a.a.splice(256,1);c.D=b;c.mb=a.mb;c.a=a.a.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.D=c});a.D=b;Rf(c,a.ya);Rf(a,c);return b}function Tf(a,b){for(var c=0,d=a.a.length,e=a.s.jb();c<d;){var f=c+d>>1;-1==e.compare(a.a[f],b)?c=f+1:d=f}return c}m.Oe=function(a){if(!P(this)){var b=Tf(this,a);this.s.Qa(this.a[b],a)&&b++;return this.h[b].Oe(a)}return this};
m.Ne=function(a){if(!P(this)){var b=Tf(this,a);this.s.Qa(this.a[b],a)&&(a.some(function(a){return a==E})||b++);return this.h[b].Ne(a)}return this};
m.Va=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.s.jb(),f=0,h=this.a.length-1,k=this.a,n=d(e.wb(k[f],a)),F=d(e.wb(k[h],a));if(1!=n&&(-1!=n||-1!=F)){var O=function(a,b){b=a+b>>1;return b==a?b+1:b},ea=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.wb(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.wb(k[h],a));return 0==n?ea(b,h,n):-1==n?ea(h+1,c,f):ea(b+1,h,n)},Cb=function(b,c){if(b>=c)return b;var f=d(e.wb(k[c],a));if(0==f)return c;if(-1==
f)return b;f=O(b,c);if(f==c)return b;var h=d(e.wb(k[f],a));return 0==h?Cb(f,c):1==h?Cb(b,f-1):-1};0!=n&&(f=ea(f+1,h,F));-1!=f&&(h=Cb(f,h),-1!=h&&h>=f&&Zf(this,b,c,f,h+1))}};function Jf(a,b,c,d){if(a.s.Ma())!b.reverse&&b.L?b.L--:c[b.count++]=a.B[d];else for(var e=0;e<a.B[d].length&&b.count<c.length;++e)!b.reverse&&b.L?b.L--:c[b.count++]=a.B[d][e]}function Zf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.X));++d)Jf(a,b,c,d)}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.s.Ma()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.se++]=this.B[c][d],a.count--}else if(this.s.Ma())b[a.se++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.se++]=this.B[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Of(a,b){var c=b.Y();a=a.map(function(a){var d=new Pf(a.id(),b);d.a=a.m[0];d.B=a.m[1];d.a.forEach(function(a,e){c.add(a,b.Ma()?1:d.B[e].length)});return d});for(var d=0;d<a.length-1;++d)Rf(a[d],a[d+1]);return 1<a.length?Gf(a[0]):a[0]}m.jd=function(a){return this.s.jb().jd(this.a[0],a)};function $f(a){this.Xc=0==a?ag:bg;this.ae=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ge=0==a?cg:dg}function bg(a,b){return a>b?1:a<b?-1:0}function ag(a,b){return bg(b,a)}function dg(a,b){return yd(a,b)}function cg(a,b){return yd(b,a)}m=$f.prototype;m.wb=function(a,b){b=this.ae(b);var c=[b.from==E,b.o==E];if(!c[0]){var d=this.Xc(a,b.from);c[0]=b.ea?1==d:-1!=d}c[1]||(d=this.Xc(a,b.o),c[1]=b.oa?-1==d:1!=d);return c};m.compare=function(a,b){return this.Xc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Bb=function(a,b){a=this.wb(a,b);return a[0]&&a[1]};m.jd=function(a,b){return this.Bb(a,b)};m.tf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.ge(a,c)}.bind(this))};m.Wd=function(a){return this.ae(a).from==E};m.td=function(a){a=this.ae(a);return[a.from,a.o]};m.Nd=function(a){return null!==a};m.Yd=l(1);
m.toString=function(){return this.compare==ag?"SimpleComparator_DESC":"SimpleComparator_ASC"};function fg(a){$f.call(this,a);this.Xc=0==a?gg:hg}r(fg,$f);function hg(a,b){return null===a?null===b?0:-1:null===b?1:bg(a,b)}function gg(a,b){return hg(b,a)}fg.prototype.Bb=function(a,b){return null===a?td(b):fg.gb.Bb.call(this,a,b)};fg.prototype.Hb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};fg.prototype.min=function(a,b){var c=this.Hb(a,b);null===c&&(c=fg.gb.min.call(this,a,b));return c};
fg.prototype.max=function(a,b){var c=this.Hb(a,b);null===c&&(c=fg.gb.max.call(this,a,b));return c};function ig(a){this.qa=a.map(function(a){return new $f(a)})}function jg(a,b,c,d){for(var e=0,f=0;f<a.qa.length&&0==e;++f)e=d(a.qa[f],b[f],c[f]);return e}m=ig.prototype;m.compare=function(a,b){return jg(this,a,b,function(a,b,e){return b==E||e==E?0:a.compare(b,e)})};m.min=function(a,b){return jg(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return jg(this,a,b,function(a,b,e){return a.max(b,e)})};
m.wb=function(a,b){for(var c=[!0,!0],d=0;d<this.qa.length&&(c[0]||c[1]);++d){var e=this.qa[d].wb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Bb=function(a,b){for(var c=!0,d=0;d<this.qa.length&&c;++d)c=this.qa[d].Bb(a[d],b[d]);return c};m.jd=function(a,b){return this.qa[0].Bb(a[0],b[0])};
m.tf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.qa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.qa[b].ge(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.qa.length&&0==c;++h)c=this.qa[h].ge(a[h],b[h]);return c}.bind(this))};m.Wd=function(a){return this.qa[0].Wd(a[0])};
m.td=function(a){var b=a.map(function(a,b){return this.qa[b].td(a)[0]},this);a=a.map(function(a,b){return this.qa[b].td(a)[1]},this);return[b,a]};m.Nd=function(a){return a.every(function(a,c){return this.qa[c].Nd(a)},this)};m.Yd=function(){return this.qa.length};function kg(a){ig.call(this,a);this.qa=a.map(function(a){return new fg(a)})}r(kg,ig);function lg(a){if(1==a.f.length)return new $f(a.f[0].order);var b=a.f.map(function(a){return a.order});return a.f.some(function(a){return a.ba.hc()})?new kg(b):new ig(b)};function mg(a){this.fa=a;this.ob=A();this.Oc=new Cf;this.za=new Cf}m=mg.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.ob.add(b),this.Oc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.ob.clear(),this.Oc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.ob.delete(b),this.Oc.remove(a,1)):(this.ob.clear(),this.Oc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?B(this.ob):this.fa.get(a)};m.Yc=function(a){return this.fa.Yc(a)};
m.Y=function(){Df(this.za,[this.fa.Y(),this.Oc]);return this.za};m.Va=function(a,b,c,d){b=this.fa.Va(a,b,c,d);return null!=a?b:b.concat(B(this.ob))};m.clear=function(){this.ob.clear();this.fa.clear()};m.Pa=function(a){return null===a?0!=this.ob.size:this.fa.Pa(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ja=function(){return[new $b(-2,B(this.ob))].concat(this.fa.Ja())};m.jb=function(){return this.fa.jb()};
function ng(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new C(102);d=b[c].m;b=b.slice(0);b.splice(c,1);a=a(b);var e=new mg(a);d.forEach(function(a){e.ob.add(a)});return e}m.Ma=function(){return this.fa.Ma()};function og(a){this.A=a;this.sb=A();this.$=new $f(1)}m=og.prototype;m.getName=g("A");m.add=function(a){if("number"!=typeof a)throw new C(103);this.sb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.sb.delete(a)};m.get=function(a){return this.Pa(a)?[a]:[]};m.min=function(){return this.Hb(this.$.min.bind(this.$))};m.max=function(){return this.Hb(this.$.max.bind(this.$))};
m.Hb=function(a){if(0==this.sb.size)return null;var b=B(this.sb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Yc=function(){return this.sb.size};m.Va=function(a,b,c,d){var e=a||[wd()];a=B(this.sb).filter(function(a){return e.some(function(b){return this.$.Bb(a,b)},this)},this);return Bf(a,b,c,d)};m.clear=function(){this.sb.clear()};m.Pa=function(a){return this.sb.has(a)};m.Ja=function(){return[new $b(0,B(this.sb))]};m.jb=g("$");
function pg(a,b){var c=new og(a);b[0].m.forEach(function(a){c.add(a,a)});return c}m.Ma=l(!0);m.Y=function(){var a=new Cf;a.ia=this.sb.size;return a};function qg(a){this.Oa=a.b(oc);this.C=a.b(qc);this.V=a.b(pc)}qg.prototype.Ea=function(a){var b=a.pa(),c=function(){if(0==b.length)return v();var a=b.shift();return(a.Cb()?rg(this,a):sg(this,a)).then(c)}.bind(this);return c()};function sg(a,b){var c=a.Oa.Fb(0,[b]);a=c.H(b.getName(),b.kb.bind(b),0).get([]).then(function(a){this.V.Wb(b.getName(),a);tg(this,b,a)}.bind(a));c.ka();return a}
function tg(a,b,c){var d=a.C.lc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.nb(b.getName());b.add(c,a.id())})})}function rg(a,b){var c=a.Oa.Fb(0,[b]),d=c.H(b.getName(),b.kb,0).get([]).then(function(a){this.V.Wb(b.getName(),a)}.bind(a));a=b.Da().map(function(a){return ug(this,a,c)},a).concat(vg(a,b,c));c.ka();return db(a.concat(d))}
function ug(a,b,c){c=c.H(b.j(),bc,1);var d=lg(b);return c.get([]).then(function(a){if(0<a.length){if(wg(b)){var c=Nf.bind(void 0,d,b.j(),b.Dc);a=ng(c,a)}else a=Nf(d,b.j(),b.Dc,a);this.C.set(b.mc,a)}}.bind(a))}function vg(a,b,c){return c.H(ef(b),bc,1).get([]).then(function(a){0<a.length&&(a=pg(ef(b),a),this.C.set(b.getName(),a))}.bind(a))};function xg(){this.Z=x();this.lc=x()}xg.prototype.Ea=function(a){a.pa().forEach(function(a){var c=[];this.lc.set(a.getName(),c);var d=ef(a);if(null===this.get(d)){var e=new og(d);c.push(e);this.Z.set(d,e)}a.Da().forEach(function(a){var b;b=lg(a);b=new Ef(a.j(),b,a.Dc);b=wg(a)&&1==a.f.length?new mg(b):b;c.push(b);this.Z.set(a.j(),b)},this)},this);return v()};xg.prototype.get=function(a){return this.Z.get(a)||null};
xg.prototype.set=function(a,b){var c=this.lc.get(a)||null;null===c&&(c=[],this.lc.set(a,c));a=null;for(var d=0;d<c.length;d++)if(c[d].getName()==b.getName()){a=d;break}null!==a&&0<c.length?c.splice(a,1,b):c.push(b);this.Z.set(b.getName(),b)};function yg(a,b){var c=[],d=null,e=null;fe(a,function(a){var h=b(a);null==a.getParent()?e=h:K(d,h);var k=a.getParent();null!==k&&J(k).length==J(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<J(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function zg(a){return Ag(a,function(a){return null===a.h})}
function Bg(a){var b=a.getParent(),c=0;null!==b&&(c=J(b).indexOf(a),b.removeChild(a));var d=J(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||ce(b,d,c+f)});return{parent:b,children:d}}function Cg(a,b){J(a).slice().forEach(function(c){a.removeChild(c);K(b,c)});K(a,b)}function Dg(a){var b=be(a,0);Bg(a);Cg(b,a);return b}
function Eg(a,b,c){var d=be(a,0),e=J(d).slice();if(!e.some(function(a){return b(a)}))return a;Bg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);de(d,h);K(k,e);ce(d,k,h)}});return d}function Fg(a,b,c,d){var e=a.getParent();null!==e&&(a=J(e).indexOf(a),de(e,a),ce(e,c,a));J(b).slice().forEach(function(a){b.removeChild(a);K(d,a)});return c}function Ag(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||J(a).forEach(d)}var e=[];d(a);return e}
function Gg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";fe(a,function(a){for(var b=0;b<ae(a);b++)d+="-";d+=c(a)});return d};function Hg(a){ge.call(this);this.pb=a;this.Wa=!1}r(Hg,ge);m=Hg.prototype;m.Nb=function(){return yg(this,function(a){if(a instanceof Hg){var b=new Hg(a.pb);b.Wa=a.Wa;a=a.W();b.sa=a;return b}return a.Nb()})};m.lb=function(a){var b=a||[];fe(this,function(a){a!=this&&a.lb(b)}.bind(this));a=A(b);return B(a)};m.u=function(a){var b=null!=a?a:A();fe(this,function(a){a!=this&&a.u(b)}.bind(this));return b};m.ud=function(a){this.Wa!=a&&(this.Wa=a,this.pb="and"==this.pb?"or":"and",J(this).forEach(function(b){return b.ud(a)}))};
m.eval=function(a){var b=J(this).map(function(b){return b.eval(a)});return Ig(this,b)};function Ig(a,b){return"and"==a.pb?Hd(b):Id(b)}m.toString=function(){return"combined_pred_"+this.pb.toString()};m.ve=function(){if("or"==this.pb){var a=new Ad;J(this).forEach(function(b){b=b.ve().ra();a.add(b)});return a}return new Ad};m.kd=function(){return"or"==this.pb?Jg(this):!1};
function Jg(a){var b=null;return J(a).every(function(a){if(!(a instanceof ie&&a.kd()))return!1;null===b&&(b=a.J);return b.j()==a.J.j()})};function Kg(a,b,c){ge.call(this);this.ga=a;this.na=b;this.F=c;this.be=null;a=Yd();this.vc=Zd(a,this.ga.I(),this.F);this.mg=a.Ye.get(this.ga.I())||null}r(Kg,ge);m=Kg.prototype;m.Nb=function(){var a=new Kg(this.ga,this.na,this.F),b=this.W();a.sa=b;return a};m.lb=function(a){return null!=a?(a.push(this.ga),a.push(this.na),a):[this.ga,this.na]};m.u=function(a){a=null!=a?a:A();a.add(this.ga.H());a.add(this.na.H());return a};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Kg(this.na,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ga);a=H(a,this.na);return this.vc(b,a)},this);return new G(b,a.u())};m.toString=function(){return"join_pred("+this.ga.j()+" "+this.F+" "+this.na.j()+")"};
function Lg(a,b,c){var d;-1!=b.u().indexOf(Md(a.ga.H()))?(d=b,b=c):d=c;if(d.entries.length>b.entries.length){a:{c=a.ga;a.ga=a.na;a.na=c;switch(a.F){case "gt":c="lt";break;case "lt":c="gt";break;case "gte":c="lte";break;case "lte":c="gte";break;default:break a}a.F=c;a.vc=Zd(Yd(),a.ga.I(),a.F)}return[b,d]}return[d,b]}function Mg(a){var b={};a.lb().forEach(function(a){b[a.getName()]=null});return b}
function Ng(a,b,c){null===a.be&&(a.be=Mg(a.na.H()));var d=new Kd(new $b(-1,a.be),!1);return Od(b,c,d,[Md(a.na.H())])}
function Og(a,b,c,d){var e=[b,c];d||(e=Lg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,k=a.na;d&&(e=c,f=b,h=a.na,k=a.ga);var n=new Wc,F=[];e.entries.forEach(function(a){var b=String(H(a,h));n.set(b,a)});var O=e.u(),ea=f.u();f.entries.forEach(function(a){var b=H(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Od(a,ea,b,O);F.push(b)}):d&&F.push(Ng(this,a,ea))}.bind(a));a=b.u().concat(c.u());return new G(F,a)}
function Pg(a,b,c,d,e){function f(a,b){b=new Kd(b,1<O.length);a=Od(a,ea,b,O);F.push(a)}var h=d.cg.H(),k=b,n=c;-1!=b.u().indexOf(Md(h))&&(k=c,n=b);var F=[],O=n.u(),ea=k.u();k.entries.forEach(function(a){var b=this.mg(H(a,d.vg)),b=d.index.get(b);0!=b.length&&(d.index.Ma()?f(a,e.get(b[0])):xf(e,b).forEach(f.bind(null,a)))},a);a=k.u().concat(n.u());return new G(F,a)};function Qg(a,b,c){return null===b?new ie(a,b,c):p(b.j)?new Kg(a,b,c):new ie(a,b,c)};var Rg={};q("lf.schema.DataStoreType",Rg);Rg.INDEXED_DB=0;Rg.MEMORY=1;Rg.LOCAL_STORAGE=2;Rg.FIREBASE=3;Rg.WEB_SQL=4;Rg.OBSERVABLE_STORE=5;function Sg(a,b,c,d){this.mc=a;this.name=b;this.Dc=c;this.f=d}Sg.prototype.j=function(){return this.mc+"."+this.name};function wg(a){return a.f.some(function(a){return a.ba.hc()})}function Q(a,b,c,d){this.A=a;this.ta=c;this.K=b;this.qd=d;this.Ka=null}q("lf.schema.Table",Q);Q.prototype.getName=g("A");Q.prototype.getName=Q.prototype.getName;
function Md(a){return a.Ka||a.A}Q.prototype.rc=function(a){var b=new this.constructor(this.A);b.Ka=a;b.Hg=this.Hg;return b};Q.prototype.as=Q.prototype.rc;Q.prototype.createRow=Q.prototype.xb;Q.prototype.deserializeRow=Q.prototype.kb;Q.prototype.Da=g("ta");Q.prototype.getIndices=Q.prototype.Da;Q.prototype.lb=g("K");Q.prototype.getColumns=Q.prototype.lb;Q.prototype.getConstraint=Q.prototype.Me;Q.prototype.Cb=g("qd");Q.prototype.persistentIndex=Q.prototype.Cb;function ef(a){return a.A+".#"};function R(a,b){this.child=a;this.Lb=b;this.Ka=null}m=R.prototype;m.getName=function(){return this.Lb+"("+this.child.getName()+")"};m.j=function(){return this.Lb+"("+this.child.j()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.j()};m.I=function(){return this.child.I()};m.Da=function(){return[]};m.Ca=l(null);m.hc=l(!1);m.rc=function(a){this.Ka=a;return this};R.prototype.as=R.prototype.rc;
function Tg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function Ug(a){this.Ka=a||null;this.U=new Q("#UnknownTable",[],[],!1)}m=Ug.prototype;m.getName=l("*");m.j=function(){return this.getName()};m.toString=function(){return this.j()};m.H=g("U");m.I=l(4);m.Da=function(){return[]};m.Ca=l(null);m.hc=l(!1);q("lf.fn.avg",function(a){return new R(a,"AVG")});function Vg(a){return new R(a||new Ug,"COUNT")}q("lf.fn.count",Vg);function Wg(a){return new R(a,"DISTINCT")}q("lf.fn.distinct",Wg);q("lf.fn.max",function(a){return new R(a,"MAX")});q("lf.fn.min",function(a){return new R(a,"MIN")});q("lf.fn.stddev",function(a){return new R(a,"STDDEV")});q("lf.fn.sum",function(a){return new R(a,"SUM")});q("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){I.call(this);this.Tf=b}r(S,I);S.prototype.exec=function(a,b){switch(this.Tf){case 1:return Xg(this,a,b);case 0:return Yg(this,a,b);default:return Zg(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Pc=function(){return this.toString()};function Zg(a,b,c){return new u(function(a){a(this.ca([],b,c))}.bind(a))}function Xg(a,b,c){return be(a,0).exec(b,c).then(function(a){return this.ca(a,b,c)}.bind(a))}
function Yg(a,b,c){var d=J(a).map(function(a){return a.exec(b,c)});return db(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ca(d,b,c)}.bind(a))};function $g(a){S.call(this,0,1);this.Be=a}r($g,S);$g.prototype.toString=function(){return"aggregation("+this.Be.map(function(a){return a.j()}).toString()+")"};$g.prototype.ca=function(a){a.forEach(function(a){ah(new bh(a,this.Be))},this);return a};function bh(a,b){this.Na=a;this.K=b}
function ah(a){a.K.forEach(function(a){a=Tg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Tg(d).slice(-1)[0],f=d.child instanceof R?Ed(this.Na,d.child):this.Na;if(null!==f.$a&&f.$a.has(d.j()))break;f=ch(d.Lb,f,e);e=this.Na;null===e.$a&&(e.$a=x());e.$a.set(d.j(),f)}},a)}
function ch(a,b,c){var d=null;switch(a){case "MIN":d=dh(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=dh(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=eh(b,c);break;case "COUNT":d=fh(b,c);break;case "SUM":d=gh(b,c);break;case "AVG":a=fh(b,c);0<a&&(d=gh(b,c)/a);break;case "GEOMEAN":d=hh(b,c);break;default:d=ih(b,c)}return d}function dh(a,b,c){return a.entries.reduce(function(a,e){e=H(e,b);return null===e?a:null===a?e:c(a,e)},null)}
function fh(a,b){return b instanceof Ug?a.entries.length:a.entries.reduce(function(a,d){return a+(null===H(d,b)?0:1)},0)}function gh(a,b){return dh(a,b,function(a,b){return b+a})}function ih(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:tb.apply(null,c)}function hh(a,b){var c=0;a=a.entries.reduce(function(a,e){e=H(e,b);if(0==e||null===e)return a;c++;return a+Math.log(e)},0);return 0==c?null:Math.pow(Math.E,a/c)}
function eh(a,b){var c=x();a.entries.forEach(function(a){var e=H(a,b);c.set(e,a)});return new G(y(c),a.u())};function jh(a,b){this.Ha=a;this.aa=b}jh.prototype.ab=g("Ha");jh.prototype.da=g("aa");function kh(){I.call(this)}r(kh,I);function lh(a,b){I.call(this);this.table=a;this.values=b}r(lh,kh);function mh(a,b){lh.call(this,a,b)}r(mh,lh);function nh(a){I.call(this);this.table=a}r(nh,kh);nh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function oh(a){I.call(this);this.table=a}r(oh,kh);oh.prototype.toString=function(){return"update("+this.table.getName()+")"};
function ph(a){I.call(this);this.O=a}r(ph,kh);ph.prototype.toString=function(){return"select("+this.O.toString()+")"};function qh(a){I.call(this);this.table=a}r(qh,kh);qh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ka||(a+=" as "+this.table.Ka);return a+")"};function rh(){I.call(this)}r(rh,kh);rh.prototype.toString=l("cross_product");function sh(a,b){I.call(this);this.f=a;this.Pb=b}r(sh,kh);
sh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Pb)var b=this.Pb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function th(a){I.call(this);this.N=a}r(th,kh);th.prototype.toString=function(){return"order_by("+te(this.N)+")"};function uh(a){I.call(this);this.f=a}r(uh,kh);uh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function vh(a){I.call(this);this.f=a}r(vh,kh);
vh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function wh(a){I.call(this);this.X=a}r(wh,kh);wh.prototype.toString=function(){return"limit("+this.X+")"};function xh(a){I.call(this);this.L=a}r(xh,kh);xh.prototype.toString=function(){return"skip("+this.L+")"};function yh(a,b){I.call(this);this.O=a;this.Rb=b}r(yh,kh);yh.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", "+this.O.toString()+")"};function zh(){};function Ah(){}r(Ah,zh);Ah.prototype.fb=function(a){this.G=a;this.ub(this.G);return this.G};Ah.prototype.ub=function(a){if(a instanceof ph){var b=Bh(this,a.O),b=Ch(this,b);Fg(a,a,b[0],b[1]);a==this.G&&(this.G=b[0]);a=b[0]}J(a).forEach(function(a){this.ub(a)},this)};function Bh(a,b){if(0==J(b).length||"and"!=b.pb)return[b];a=J(b).slice().map(function(a){b.removeChild(a);return Bh(this,a)},a);return Ea(a)}
function Ch(a,b){var c=null,d=null;b.map(function(a,b){a=new ph(a);0==b?c=a:K(d,a);d=a},a);return[c,d]};function Dh(){}r(Dh,zh);Dh.prototype.fb=function(a,b){if(3>b.from.length)return a;this.G=a;this.ub(this.G);return this.G};Dh.prototype.ub=function(a){if(a instanceof rh)for(;2<J(a).length;){for(var b=new rh,c=0;2>c;c++){var d=de(a,0);K(b,d)}ce(a,b,0)}J(a).forEach(function(a){this.ub(a)},this)};function Eh(){S.call(this,0,0)}r(Eh,S);Eh.prototype.toString=l("cross_product");Eh.prototype.ca=function(a){var b=a[0],c=a[1];a=[];for(var d=b.u(),e=c.u(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Od(b.entries[f],d,c.entries[h],e);a.push(k)}b=b.u().concat(c.u());return[new G(a,b)]};function Fh(a,b){we.call(this,a,b);this.Ia=a.b(sc);this.Ib=a.b(tc)}r(Fh,we);Fh.prototype.getPriority=l(2);Fh.prototype.ee=function(a){0==this.I()?Gh(this,a):this.Mc()};function Gh(a,b){a.sd.forEach(function(a,d){a instanceof se&&ze(this.Ib,a,b[d])},a)}Fh.prototype.Mc=function(){var a=Be(this.Ib,this.da());0!=a.length&&(a=new ye(this.global,a),Ce(this.Ia,a))};function Hh(a){me.call(this,a)}r(Hh,me);Hh.prototype.da=function(){var a=A();a.add(this.from);Ih(this,this.from.getName(),a);return a};function Ih(a,b,c){var d=Jh(a.ba.info(),b,1);Jh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Ih(this,a.getName(),c)},a)}Hh.prototype.clone=function(){var a=new Hh(this.ba);qe(a,this);a.from=this.from;return a};Hh.prototype.bind=function(a){Hh.gb.bind.call(this,a);re(this,a);return this};function Kh(a){me.call(this,a)}r(Kh,me);Kh.prototype.da=function(){var a=A();a.add(this.La);var b=this.ba.info();Lh(this.La.getName(),b.ff).forEach(a.add.bind(a));this.ac&&Jh(b,this.La.getName()).forEach(a.add.bind(a));return a};Kh.prototype.clone=function(){var a=new Kh(this.ba);qe(a,this);a.La=this.La;this.values&&(a.values=this.values instanceof Pd?this.values:this.values.slice());a.ac=this.ac;a.bc=this.bc;return a};
Kh.prototype.bind=function(a){Kh.gb.bind.call(this,a);this.bc&&(this.values=this.bc instanceof Pd?a[this.bc.Ca()]:this.bc.map(function(b){return b instanceof Pd?a[b.Ca()]:b}));return this};function Mh(a){me.call(this,a)}r(Mh,me);Mh.prototype.da=function(){var a=A();a.add(this.table);var b=this.set.map(function(a){return a.J.j()}),c=this.ba.info();Nh(c,b).forEach(a.add.bind(a));Oh(c,b).forEach(a.add.bind(a));return a};Mh.prototype.clone=function(){var a=new Mh(this.ba);qe(a,this);a.table=this.table;a.set=this.set?Ph(this.set):this.set;return a};Mh.prototype.bind=function(a){Mh.gb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Tc&&(b.value=a[b.Tc])});re(this,a);return this};
function Ph(a){return a.map(function(a){var c={},d;for(d in a)c[d]=a[d];return c})};function Qh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+dc(b)+"'";default:return"'"+b.toString()+"'"}}function Rh(a,b){var c=a.ac?"INSERT OR REPLACE":"INSERT",d=a.La.lb(),c=c+(" INTO "+a.La.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.m[c.getName()];return b?null!=d?"#":"NULL":Qh(c.I(),d)});return c+f.join(", ")+");"}).join("\n")}
function Sh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Th(a,b,c,d){return a instanceof Pd?"?"+a.Ca().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Qh(c,a)}).join(", ")+")":"between"==b?Qh(c,a[0])+" AND "+Qh(c,a[1]):Qh(c,a).toString()}
function Uh(a,b){return J(a).map(function(a){return"("+Vh(a,b)+")"}).join("and"==a.pb?" AND ":" OR ")}function Wh(a){return[a.ga.j(),Sh(a.F),a.na.j()].join(" ")}function Vh(a,b){if(a instanceof ie){var c=a.J.j(),d=Sh(a.F);a=Th(a.value,a.F,a.J.I(),b);return"="==d&&"NULL"==a?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==a?[c,"IS NOT NULL"].join(" "):[c,d,a].join(" ")}if(a instanceof Hg)return Uh(a,b);if(a instanceof Kg)return Wh(a);throw new C(357,typeof a);}
function Xh(a,b){return(a=Vh(a,b))?" WHERE "+a:""}function Yh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.J.j()+" = ";return-1!=a.Tc?b+"?"+a.Tc.toString():b+Qh(a.J.I(),a.value).toString()}).join(", ");a.w&&(c+=Xh(a.w,b));return c+";"}
function Zh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Ka?a.j()+" AS "+a.Ka:a.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.cb&&0!=a.cb.size?c+=$h(a,b):(c+=a.from.map(ai).join(", "),a.w&&(c+=Xh(a.w,b)));a.N&&(b=a.N.map(function(a){return a.J.j()+(0==a.order?" DESC":" ASC")}).join(", "),c+=" ORDER BY "+b);a.la&&(b=a.la.map(function(a){return a.j()}).join(", "),c+=" GROUP BY "+b);a.X&&(c+=" LIMIT "+a.X.toString());a.L&&(c+=" SKIP "+a.L.toString());return c+";"}
function ai(a){return Md(a)!=a.getName()?a.getName()+" AS "+Md(a):a.getName()}function $h(a,b){for(var c=Ag(a.w,function(a){return a instanceof Kg}),d=c.map(Wh),e=ai(a.from[0]),f=1;f<a.from.length;f++)var h=ai(a.from[f]),e=a.cb.has(c[d.length-f].W())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");a=be(a.w,0);a instanceof Kg||(e+=" WHERE "+Vh(a,b));return e}
function bi(a,b){b=b||!1;a=a.query.clone();if(a instanceof Kh)return Rh(a,b);if(a instanceof Hh){var c="DELETE FROM "+a.from.getName();a.w&&(c+=Xh(a.w,b));return c+";"}if(a instanceof Mh)return Yh(a,b);if(a instanceof se)return Zh(a,b);throw new C(358,typeof a);};function T(a,b){this.global=a;this.Gg=a.b(rc);this.Ia=a.b(sc);this.query=b}q("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.ib()}catch(a){return ab(a)}return new u(function(a,b){var c=new Fh(this.global,[this.Bc()]);Ce(this.Ia,c).then(function(b){a(Cd(b[0]))},b)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Vf=function(){var a=function(a){return a.Pc(this.query)+"\n"}.bind(this);return Gg(ci(this).ab(),a)};T.prototype.explain=T.prototype.Vf;
T.prototype.bind=function(a){this.query.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.Og=function(a){return bi(this,a)};T.prototype.toSql=T.prototype.Og;T.prototype.ib=aa();function ci(a){if(null==a.gf){var b;b=a.Gg;var c=a.query,d=b.pg.create(c);b=b.Dg.create(d,c);a.gf=b}return a.gf}T.prototype.Bc=function(){return{context:this.query.clone(),he:ci(this)}};function di(a){T.call(this,a,new Hh(a.b(uc)))}r(di,T);q("lf.query.DeleteBuilder",di);di.prototype.from=function(a){if(null!=this.query.from)throw new C(515);this.query.from=a;return this};di.prototype.from=di.prototype.from;di.prototype.w=function(a){this.Ed();this.query.w=a;return this};di.prototype.where=di.prototype.w;di.prototype.Ed=function(){if(null==this.query.from)throw new C(548);if(null!=this.query.w)throw new C(516);};
di.prototype.ib=function(){di.gb.ib.call(this);if(null==this.query.from)throw new C(517);};function ei(a,b){T.call(this,a,new Kh(a.b(uc)));this.query.ac=b||!1}r(ei,T);q("lf.query.InsertBuilder",ei);ei.prototype.ib=function(){ei.gb.ib.call(this);var a=this.query;if(null==a.La||null==a.values)throw new C(518);if(a.ac&&null===a.La.Mb.rd)throw new C(519);};ei.prototype.La=function(a){if(null!=this.query.La)throw new C(520);this.query.La=a;return this};ei.prototype.into=ei.prototype.La;
ei.prototype.values=function(a){if(null!=this.query.values)throw new C(521);a instanceof Pd||a.some(function(a){return a instanceof Pd})?this.query.bc=a:this.query.values=a;return this};ei.prototype.values=ei.prototype.values;function fi(a){return gi("and",Array.prototype.slice.call(arguments))}q("lf.op.and",fi);q("lf.op.or",function(a){return gi("or",Array.prototype.slice.call(arguments))});function gi(a,b){var c=new Hg(a);b.forEach(function(a){K(c,a)});return c}q("lf.op.not",function(a){a.ud(!0);return a});function U(a,b){T.call(this,a,new se(a.b(uc)));this.Le=this.zd=!1;this.query.f=b;hi(this);ii(this)}r(U,T);q("lf.query.SelectBuilder",U);U.prototype.ib=function(){U.gb.ib.call(this);var a=this.query;if(null==a.from)throw new C(522);if(p(a.Sb)&&!p(a.X)||p(a.Zb)&&!p(a.L))throw new C(523);null!=this.query.la?ji(this):ki(this)};function hi(a){var b=a.query.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Lb},a);if(0!=b.length&&(1!=b.length||1!=a.query.f.length))throw new C(524);}
function ji(a){var b=a.query.f.filter(function(a){return!(a instanceof R)}).map(function(a){return a.j()}),c=!1;if(0==a.query.la.length||0==a.query.f.length)c=!0;else{var d=a.query.la.map(function(a){return a.j()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.query.la.some(function(a){a=a.I();return 6==a||0==a}))}if(c)throw new C(525);}
function ki(a){var b=a.query.f.some(function(a){return a instanceof R},a);a=a.query.f.some(function(a){return!(a instanceof R)},a)||0==a.query.f.length;if(b&&a)throw new C(526);}function ii(a){a.query.f.forEach(function(a){if(a instanceof R&&!li(a.Lb,a.I()))throw new C(527,a.j());},a)}function mi(a,b){if(null==a.query.from)throw new C(b);}
U.prototype.from=function(a){if(this.Le)throw new C(515);this.Le=!0;null==this.query.from&&(this.query.from=[]);this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.from;U.prototype.w=function(a){mi(this,548);if(this.zd)throw new C(516);this.zd=!0;ni(this,a);return this};U.prototype.where=U.prototype.w;function ni(a,b){null!=a.query.w&&(b=fi(b,a.query.w));a.query.w=b}
U.prototype.gg=function(a,b){mi(this,542);if(this.zd)throw new C(547);this.query.from.push(a);ni(this,b);return this};U.prototype.innerJoin=U.prototype.gg;U.prototype.ng=function(a,b){mi(this,542);if(!(b instanceof Kg))throw new C(541);if(this.zd)throw new C(547);this.query.from.push(a);null==this.query.cb&&(this.query.cb=A());var c=b;Md(a)!=Md(b.na.H())&&(c=b.reverse());this.query.cb.add(c.W());ni(this,c);return this};U.prototype.leftOuterJoin=U.prototype.ng;
U.prototype.X=function(a){if(null!=(this.query.X||this.query.Sb))throw new C(528);if(a instanceof Pd)this.query.Sb=a;else{if(0>a)throw new C(531);this.query.X=a}return this};U.prototype.limit=U.prototype.X;U.prototype.L=function(a){if(null!=(this.query.L||this.query.Zb))throw new C(529);if(a instanceof Pd)this.query.Zb=a;else{if(0>a)throw new C(531);this.query.L=a}return this};U.prototype.skip=U.prototype.L;
U.prototype.N=function(a,b){mi(this,549);null==this.query.N&&(this.query.N=[]);this.query.N.push({J:a,order:null!=b?b:1});return this};U.prototype.orderBy=U.prototype.N;U.prototype.la=function(a){mi(this,549);if(null!=this.query.la)throw new C(530);null==this.query.la&&(this.query.la=[]);this.query.la.push.apply(this.query.la,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.la;
function li(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}U.prototype.clone=function(){var a=new U(this.global,this.query.f);a.query=this.query.clone();a.query.Wc=null;return a};U.prototype.clone=U.prototype.clone;function oi(a,b){T.call(this,a,new Mh(a.b(uc)));this.query.table=b}r(oi,T);q("lf.query.UpdateBuilder",oi);oi.prototype.set=function(a,b){a={Tc:b instanceof Pd?b.Ca():-1,J:a,value:b};null!=this.query.set?this.query.set.push(a):this.query.set=[a];return this};oi.prototype.set=oi.prototype.set;oi.prototype.w=function(a){this.Ed();this.query.w=a;return this};oi.prototype.where=oi.prototype.w;oi.prototype.Ed=function(){if(null!=this.query.w)throw new C(516);};
oi.prototype.ib=function(){oi.gb.ib.call(this);if(null==this.query.set)throw new C(532);if(this.query.set.some(function(a){return a.value instanceof Pd}))throw new C(501);};function pi(a){this.query=a;this.Ha=null}pi.prototype.gc=function(){null===this.Ha&&(this.Ha=this.$c());return this.Ha};function qi(a){pi.call(this,a)}r(qi,pi);qi.prototype.$c=function(){return this.query.ac?new mh(this.query.La,this.query.values):new lh(this.query.La,this.query.values)};function ri(a){pi.call(this,a)}r(ri,pi);ri.prototype.$c=function(){var a=new oh(this.query.table),b=null!=this.query.w?new ph(this.query.w.Nb()):null,c=new qh(this.query.table);null===b?K(a,c):(K(b,c),K(a,b));return a};function si(a,b,c){this.Ha=a;this.je=b;this.Vb=c}si.prototype.gc=function(){this.Vb.forEach(function(a){this.Ha=a.fb(this.Ha,this.je)},this);return this.Ha};function ti(a,b){pi.call(this,a);this.Vb=b}r(ti,pi);ti.prototype.$c=function(){var a=new nh(this.query.from),b=null!=this.query.w?new ph(this.query.w.Nb()):null,c=new qh(this.query.from);null===b?K(a,c):(K(b,c),K(a,b));return(new si(a,this.query,this.Vb)).gc()};function ui(){}r(ui,zh);ui.prototype.fb=function(a,b){if(2>b.from.length)return a;this.G=a;this.ub(this.G,b);return this.G};ui.prototype.ub=function(a,b){if(a instanceof ph&&a.O instanceof Kg){var c=a.O.W(),d=be(a,0);d instanceof rh&&(c=null!=b.cb&&b.cb.has(c),c=new yh(a.O,c),Fg(a,d,c,c),a==this.G&&(this.G=c),a=c)}J(a).forEach(function(a){this.ub(a,b)},this)};function vi(){this.Sc=A()}r(vi,zh);vi.prototype.fb=function(a,b){if(!p(b.w))return a;this.Sc.clear();this.G=a;this.ub(this.G,b);this.Sc.clear();return this.G};vi.prototype.ub=function(a,b){var c=function(a){J(a).forEach(d)}.bind(this),d=function(a){if(!this.Sc.has(a)){if(a instanceof ph){var f=a.O.u(),h=function(a){return wi(this,a,f)}.bind(this),h=xi(this,b,a,h);this.Sc.add(a);h!=a&&(null===h.getParent()&&(this.G=h),d(h))}c(a)}}.bind(this);d(a)};
function xi(a,b,c,d){var e=c;if(yi(b,c))e=Dg(c),xi(a,b,c,d);else if(zi(c)){var f=[],e=Eg(c,d,function(a){a=new ph(a.O);f.push(a);return a});f.forEach(function(a){xi(this,b,a,d)},a)}return e}function wi(a,b,c){var d=A();zg(b).forEach(function(a){d.add(a.table)},a);b instanceof qh&&d.add(b.table);return Ac(d,c)}function zi(a){a=be(a,0);return a instanceof rh||a instanceof yh}
function yi(a,b){var c=be(b,0);if(!(c instanceof ph))return!1;if(null==a.cb)return!0;b=b.O instanceof Kg;a=a.cb.has(c.O.W());return b||!a};function Ai(a,b){pi.call(this,a);this.Vb=b;this.jf=this.bf=this.sf=this.ef=this.Ce=this.Re=this.rf=this.Ie=this.uf=null}r(Ai,pi);
Ai.prototype.$c=function(){Bi(this);2<=this.query.from.length&&(this.Ie=new rh);this.rf=null!=this.query.w?new ph(this.query.w.Nb()):null;this.query.N&&(this.ef=new th(this.query.N));null!=this.query.L&&0<this.query.L&&(this.sf=new xh(this.query.L));null!=this.query.X&&(this.bf=new wh(this.query.X));null!=this.query.la&&(this.Re=new vh(this.query.la));Ci(this);this.jf=new sh(this.query.f||[],this.query.la||null);var a=Di(this);return(new si(a,this.query,this.Vb)).gc()};
function Di(a){for(var b=[a.bf,a.sf,a.jf,a.ef,a.Ce,a.Re,a.rf,a.Ie],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:K(b[c],f),c=e)}a.uf.forEach(function(a){K(b[c],a)});return d}function Bi(a){a.uf=a.query.from.map(function(a){return new qh(a)},a)}function Ci(a){var b=a.query.f.filter(function(a){return a instanceof R});null!=a.query.N&&a.query.N.forEach(function(a){a.J instanceof R&&b.push(a.J)});0<b.length&&(a.Ce=new uh(b))};function Ei(){this.qe=[new Ah,new Dh,new vi,new ui];this.Od=[new Ah]}Ei.prototype.create=function(a){var b;if(a instanceof Kh)b=new qi(a);else if(a instanceof Hh)b=new ti(a,this.Od);else if(a instanceof se)b=new Ai(a,this.qe);else if(a instanceof Mh)b=new ri(a);else throw new C(513);b=b.gc();return new jh(b,a.da())};function Fi(a){S.call(this,0,1);this.U=a}r(Fi,S);Fi.prototype.toString=function(){return"delete("+this.U.getName()+")"};Fi.prototype.ca=function(a,b){a=a[0].entries.map(function(a){return a.va});b.remove(this.U,a);return[Gd()]};function Gi(a,b){S.call(this,0,-1);this.table=b;this.C=a.b(qc)}r(Gi,S);Gi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Gi.prototype.ca=function(){var a=this.C.get(ef(this.table)),b=new G([],[this.table.getName()]),c=Vg(),a=a.Y().ia;null===b.$a&&(b.$a=x());b.$a.set(c.j(),a);return[b]};function Hi(a,b){S.call(this,0,-1);this.V=a.b(pc);this.C=a.b(qc);this.table=b}r(Hi,S);Hi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ka||(a+=" as "+this.table.Ka);return a+")"};Hi.prototype.ca=function(){var a=this.C.get(ef(this.table)).Va();return[Jd(xf(this.V,a),[Md(this.table)])]};function Ii(a){this.c=a}r(Ii,zh);Ii.prototype.fb=function(a,b){this.G=a;if(!this.Gd(b))return a;a=Ag(a,function(a){return a instanceof Hi})[0];b=new Gi(this.c,a.table);Fg(a,a,b,b);return this.G};Ii.prototype.Gd=function(a){return 1==a.f.length&&1==a.from.length&&null==a.w&&null==a.X&&null==a.L&&null==a.la?(a=a.f[0],a instanceof R&&"COUNT"==a.Lb&&a.child instanceof Ug):!1};function Ji(a){S.call(this,0,1);this.Qe=a}r(Ji,S);Ji.prototype.toString=function(){return"groupBy("+this.Qe.map(function(a){return a.j()}).toString()+")"};Ji.prototype.ca=function(a){return Ki(this,a[0])};function Ki(a,b){var c=new Wc,d=function(a){return this.Qe.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),b.u())},a)};function Li(a,b,c){S.call(this,0,0);this.C=a.b(qc);this.V=a.b(pc);this.O=b;this.Rb=c;this.Cd="eq"==this.O.F?0:2;this.Te=null}r(Li,S);var Mi=["hash","index_nested_loop","nested_loop"];Li.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", impl: "+Mi[this.Cd]+", "+this.O.toString()+")"};
Li.prototype.ca=function(a){switch(this.Cd){case 0:return[Og(this.O,a[0],a[1],this.Rb)];case 1:return[Pg(this.O,a[0],a[1],this.Te,this.V)];default:var b=this.O,c=a[0];a=a[1];var d=this.Rb,e=[c,a];d||(e=Lg(b,c,a));c=e[0];a=e[1];for(var e=[],f=c.u(),h=a.u(),k=c.entries.length,n=a.entries.length,F=n+256-1>>8,O=0;O<F;){for(var ea=0;ea<k;ea++){var Cb=!1,eg=H(c.entries[ea],b.ga);if(null!==eg)for(var ec=Math.min(O+1<<8,n),Db=O<<8;Db<ec;Db++)if(b.vc(eg,H(a.entries[Db],b.na))){var Cb=!0,Uc=Od(c.entries[ea],
f,a.entries[Db],h);e.push(Uc)}d&&!Cb&&e.push(Ng(b,c.entries[ea],f))}O++}b=c.u().concat(a.u());return[new G(e,b)]}};function Ni(a,b){a.Cd=1;var c=a.C.get(b.Ca().j());a.Te={cg:b,vg:b==a.O.ga?a.O.na:a.O.ga,index:c}};function Oi(a){S.call(this,0,-1);this.kf=a}r(Oi,S);Oi.prototype.toString=function(){return"no_op_step("+this.kf[0].u().join(",")+")"};Oi.prototype.ca=g("kf");function Pi(){}r(Pi,zh);Pi.prototype.fb=function(a,b){this.G=a;if(!this.Gd(b))return a;Ag(a,function(a){return a instanceof Li}).forEach(this.Fg,this);return this.G};Pi.prototype.Gd=function(a){return 1<a.from.length};
Pi.prototype.Fg=function(a){if("eq"==a.O.F&&!a.Rb){var b=function(b){if(!(b instanceof Hi))return null;b=Md(b.table)==Md(a.O.na.H())?a.O.na:a.O.ga;return null===b.Ca()?null:b},c=b(be(a,0)),b=b(be(a,1));if(null!==c||null!==b){b=null===b?c:b;Ni(a,b);var d=new G([],[Md(b.H())]);ee(a,new Oi([d]),b==c?0:1)}}};function Qi(a){a=a.map(function(a){return a.ra()});a=yb.apply(null,a);var b=[];xb(a,function(a){b.push(a)});return b}function Ri(a){this.Qb=a}Ri.prototype.ad=function(){return 1==this.Qb.f.length?[wd()]:[this.Qb.f.map(function(){return wd()})]};function Si(a,b){this.Qb=a;this.Ga=b;this.Kd=this.$e=null}
function Ti(a,b){var c=x();a.Ga.keys().forEach(function(a){var e=this.Ga.get(a).map(function(a){return ne(b,a)},this),f=new Ad([wd()]);e.forEach(function(a){f=Bd(f,a.ve())});c.set(a,f)},a);return c}Si.prototype.ad=function(a){if(this.$e==a)return this.Kd;for(var b=Ti(this,a),c=this.Qb.f.length-1;0<=c;c--){var d=this.Qb.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new Ad([wd()]))}this.Kd=1==this.Qb.f.length?y(b)[0].ra():Qi(Ui(this,b));this.$e=a;return this.Kd};
function Ui(a,b){var c=x(),d=0;a.Qb.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return Zb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Vi(a,b){this.wd=b;this.C=a.b(qc)}function Wi(a){a=a.C.get(ef(a.wd));return Math.floor(.02*a.Y().ia)}function Xi(a,b,c){c=c.filter(a.jg,a);if(0==c.length)return null;a=Yi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Zi(c,b);return h<d?(d=h,c):a},null)}
function Yi(a,b){return a.wd.Da().map(function(a){a=new $i(this.C,a);aj(a,b);return a},a).filter(function(a){if(null===a.Ga)a=!1;else{for(var b=!1,e=!0,f=0;f<a.bb.f.length;f++){var h=a.Ga.has(a.bb.f[f].ba.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Vi.prototype.jg=function(a){return a instanceof ie?!a.kd()||a.J.H()!=this.wd||"in"==a.F&&a.value.length>Wi(this)?!1:!0:a instanceof Hg?a.kd()&&be(a,0).J.H()==this.wd?J(a).length<=Wi(this):!1:!1};
function $i(a,b){this.C=a;this.bb=b;this.dg=A(this.bb.f.map(function(a){return a.ba.getName()}));this.Zd=this.Ga=null}function bj(a){null===a.Zd&&(a.Zd=new Si(a.bb,a.Ga));return a.Zd}function aj(a,b){b.forEach(function(a){var b=a.lb()[0].getName();this.dg.has(b)&&(null===this.Ga&&(this.Ga=new Wc),this.Ga.set(b,a.W()))},a)}function Zi(a,b){b=bj(a).ad(b);var c=a.C.get(a.bb.j());return b.reduce(function(a,b){return a+c.Yc(b)},0)};function cj(a,b,c,d){S.call(this,0,-1);this.C=a.b(qc);this.index=b;this.Ze=c;this.ne=d;this.Rc=this.Qc=!1}r(cj,S);cj.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.ne?"reverse":"natural")+(this.Qc?", limit:?":"")+(this.Rc?", skip:?":"")+")"};cj.prototype.Pc=function(a){var b=this.toString(),c=this.Ze.ad(a),b=b.replace("?",c.toString());this.Qc&&(b=b.replace("?",a.X.toString()));this.Rc&&(b=b.replace("?",a.L.toString()));return b};
cj.prototype.ca=function(a,b,c){a=this.Ze.ad(c);b=this.C.get(this.index.j());c=(1==a.length&&a[0]instanceof D&&xd(a[0])?Bf(b.get(a[0].from),!1,this.Qc?c.X:void 0,this.Rc?c.L:void 0):b.Va(a,this.ne,this.Qc?c.X:void 0,this.Rc?c.L:void 0)).map(function(a){return new $b(a,{})},this);return[Jd(c,[this.index.mc])]};function dj(){S.call(this,0,0)}r(dj,S);dj.prototype.toString=l("multi_index_range_scan()");
dj.prototype.ca=function(a){var b=x();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.va.id(),a)})});var c=y(b);return[new G(c,a[0].u())]};function ej(a){S.call(this,0,1);this.jc=a}r(ej,S);ej.prototype.toString=l("select(?)");ej.prototype.Pc=function(a){a=ne(a,this.jc);return this.toString().replace("?",a.toString())};ej.prototype.ca=function(a,b,c){return[ne(c,this.jc).eval(a[0])]};function fj(a,b){S.call(this,0,1);this.V=a.b(pc);this.U=b}r(fj,S);fj.prototype.toString=function(){return"table_access_by_row_id("+this.U.getName()+")"};fj.prototype.ca=function(a){return[Jd(xf(this.V,Dd(a[0])),[Md(this.U)])]};function gj(a){this.c=a}r(gj,zh);gj.prototype.fb=function(a,b){this.G=a;Ag(a,function(a){return a instanceof Hi}).forEach(function(a){var d=hj(a);if(0!=d.length){var e=Xi(new Vi(this.c,a.table),b,d.map(function(a){return ne(b,a.jc)}));if(null!==e){var f=x();d.forEach(function(a){f.set(a.jc,a)},this);this.G=ij(this,e,f,a)}}},this);return this.G};function hj(a){var b=[];for(a=a.getParent();a;){if(a instanceof ej)b.push(a);else if(a instanceof Li)break;a=a.getParent()}return b}
function ij(a,b,c,d){(null===b.Ga?[]:b.Ga.values()).map(function(a){return c.get(a)}).forEach(Bg);b=new cj(a.c,b.bb,bj(b),!1);a=new fj(a.c,d.table);K(a,b);Fg(d,d,a,b);return b.ab()};function jj(a,b){S.call(this,0,-1);this.C=a.b(qc);this.U=b}r(jj,S);jj.prototype.toString=function(){return"insert("+this.U.getName()+")"};jj.prototype.ca=function(a,b,c){kj(this.U,c.values,this.C);b.Ab(this.U,c.values);return[Jd(c.values,[this.U.getName()])]};function kj(a,b,c){a=a.Mb.rd;if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.j()).Y().Fc;var e=null===c?0:c;b.forEach(function(a){if(0==a.m[d]||null==a.m[d])e++,a.m[d]=e})}}
function lj(a,b){S.call(this,0,-1);this.C=a.b(qc);this.U=b}r(lj,S);lj.prototype.toString=function(){return"insert_replace("+this.U.getName()+")"};lj.prototype.ca=function(a,b,c){kj(this.U,c.values,this.C);b.Vd(this.U,c.values);return[Jd(c.values,[this.U.getName()])]};function mj(){S.call(this,0,1)}r(mj,S);mj.prototype.toString=l("limit(?)");mj.prototype.Pc=function(a){return this.toString().replace("?",a.X.toString())};mj.prototype.ca=function(a,b,c){a[0].entries.splice(c.X);return a};function nj(a){S.call(this,0,1);this.N=a}r(nj,S);m=nj.prototype;m.toString=function(){return"order_by("+te(this.N)+")"};m.ca=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.N.length;d++){var e=Wg(this.N[d].J);if(null!==b.$a&&b.$a.has(e.j())){c=e;break}}b=c;(null===b?a[0]:Ed(a[0],b)).entries.sort(this.Sf.bind(this))}else a.sort(this.Ig.bind(this));return a};
m.$=function(a,b){var c,d,e,f=-1;do f++,e=this.N[f].J,c=this.N[f].order,d=a(e),e=b(e);while(d==e&&f+1<this.N.length);a=d<e?-1:d>e?1:0;return 1==c?a:-a};m.Ig=function(a,b){return this.$(function(b){return b instanceof R?Ed(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?Ed(b,a):H(b.entries[b.entries.length-1],a)})};m.Sf=function(a,b){return this.$(function(b){return H(a,b)},function(a){return H(b,a)})};function oj(a,b){this.Na=a;this.K=b}function pj(a){return a.K.some(function(a){return a instanceof R},a)?qj(a):rj(a)}function qj(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Lb)return a=Ed(a.Na,a.K[0]).entries.map(function(a){var b=new Kd(new $b(-1,{}),1<this.Na.M.size);Nd(b,this.K[0],H(a,this.K[0].child));return b},a),new G(a,[]);var b=new Kd(new $b(-1,{}),1<a.Na.M.size);a.K.forEach(function(a){var d=a instanceof R?Ed(this.Na,a):H(this.Na.entries[0],a);Nd(b,a,d)},a);return new G([b],a.Na.u())}
function rj(a){var b=Array(a.Na.entries.length),c=1<a.Na.M.size;a.Na.entries.forEach(function(a,e){b[e]=new Kd(new $b(a.va.id(),{}),c);this.K.forEach(function(c){Nd(b[e],c,H(a,c))},this)},a);return new G(b,a.Na.u())}function sj(a,b){var c=a.map(function(a){return pj(new oj(a,b)).entries[0]});return new G(c,a[0].u())};function tj(a,b){S.call(this,0,1);this.f=a;this.Pb=b}r(tj,S);tj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Pb)var b=this.Pb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};tj.prototype.ca=function(a){0==a.length?a=[Gd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:pj(new oj(a,this.f))]):a=[sj(a,this.f)];return a};function uj(a){return a.f.some(function(a){return a instanceof R})||null!==a.Pb};function vj(){S.call(this,0,1)}r(vj,S);vj.prototype.toString=l("skip(?)");vj.prototype.Pc=function(a){return this.toString().replace("?",a.L.toString())};vj.prototype.ca=function(a,b,c){return[new G(a[0].entries.slice(c.L),a[0].u())]};function wj(){}r(wj,zh);wj.prototype.fb=function(a,b){if(!p(b.X)&&!p(b.L))return a;var c=xj(a);if(null===c)return a;Ag(a,function(a){return a instanceof mj||a instanceof vj}).forEach(function(a){a instanceof mj?c.Qc=!0:c.Rc=!0;Bg(a)},this);return c.ab()};function xj(a){a=Ag(a,function(a){return a instanceof cj},function(a){return a instanceof tj&&uj(a)||a instanceof nj||1!=J(a).length||a instanceof ej});return 0<a.length?a[0]:null};function yj(a){this.c=a}r(yj,zh);yj.prototype.fb=function(a,b){this.G=a;var c=zj(this,b);if(0==c.length)return this.G;var d,e=0;do d=c[e++],a=Aj(this,d,b);while(null===a&&e<c.length);if(null===a)return this.G;b=Bj(this,a[0].bb.mc);return null===b?this.G:this.G=Cj(this,d,b,a)};function zj(a,b){return Ag(a.G,function(a){if(!(a instanceof ej))return!1;a=ne(b,a.jc);return a instanceof Hg&&"or"==a.pb})}function Bj(a,b){return Ag(a.G,function(a){return a instanceof Hi&&a.table.getName()==b})[0]||null}
function Aj(a,b,c){b=ne(c,b.jc);var d=b.u();if(1!=d.size)return null;var d=B(d)[0],e=new Vi(a.c,d),f=null;return J(b).every(function(a){a=Xi(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function Cj(a,b,c,d){var e=new fj(a.c,c.table),f=new dj;K(e,f);d.forEach(function(a){a=new cj(this.c,a.bb,bj(a),!1);K(f,a)},a);Bg(b);Fg(c,c,e,f);return f.ab()};function Dj(a){this.c=a}r(Dj,zh);Dj.prototype.fb=function(a,b){b=Ej(a,b);if(null===b)return a;a:{var c=b;a=Fj(be(b,0));if(null!==a){var d;d=b.N;for(var e=null,f=a.table.Da(),h=0;h<f.length&&null===e;h++)e=Gj(f[h],d);d=e;if(null===d){a=c;break a}c=new cj(this.c,d.bb,new Ri(d.bb),d.We);d=new fj(this.c,a.table);K(d,c);Bg(b);c=Fg(a,a,d,c)}a=c}if(a==b)a:if(a=b,c=Hj(be(b,0)),null!==c){d=Gj(c.index,b.N);if(null===d)break a;c.ne=d.We;a=Bg(b).parent}return a.ab()};
function Hj(a){a=Ag(a,function(a){return a instanceof cj},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function Fj(a){a=Ag(a,function(a){return a instanceof Hi},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function Ej(a,b){return p(b.N)?Ag(a,function(a){return a instanceof nj})[0]:null}function Gj(a,b){if(a.f.length!=b.length||!b.every(function(b,d){return b.J.getName()==a.f[d].ba.getName()}))return null;b=Ij(b,a);return b[0]||b[1]?{bb:a,We:b[1]}:null}
function Ij(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function Jj(a,b,c){this.Ha=a;this.je=b;this.Vb=c}Jj.prototype.gc=function(){this.Vb.forEach(function(a){this.Ha=a.fb(this.Ha,this.je)},this);return this.Ha};function Kj(a){S.call(this,0,1);this.U=a}r(Kj,S);Kj.prototype.toString=function(){return"update("+this.U.getName()+")"};Kj.prototype.ca=function(a,b,c){a=a[0].entries.map(function(a){var b=this.U.kb(a.va.Ja());c.set.forEach(function(a){b.m[a.J.getName()]=a.value},this);return b},this);b.update(this.U,a);return[Gd()]};function Lj(a){this.c=a;this.qe=[new Pi,new gj(this.c),new yj(this.c),new Dj(this.c),new wj,new Ii(this.c)];this.Od=[new gj(this.c)]}Lj.prototype.create=function(a,b){var c=a.ab();if(c instanceof mh||c instanceof lh)return Mj(this,a,b);if(c instanceof sh||c instanceof wh||c instanceof xh)return Mj(this,a,b,this.qe);if(c instanceof nh||c instanceof oh)return Mj(this,a,b,this.Od);throw new C(8);};
function Mj(a,b,c,d){a=yg(b.ab(),a.sg.bind(a));null!=d&&(a=(new Jj(a,c,d)).gc());return new ue(a,b.da())}
Lj.prototype.sg=function(a){if(a instanceof sh)return new tj(a.f,a.Pb);if(a instanceof vh)return new Ji(a.f);if(a instanceof uh)return new $g(a.f);if(a instanceof th)return new nj(a.N);if(a instanceof xh)return new vj;if(a instanceof wh)return new mj;if(a instanceof ph)return new ej(a.O.W());if(a instanceof rh)return new Eh;if(a instanceof yh)return new Li(this.c,a.O,a.Rb);if(a instanceof qh)return new Hi(this.c,a.table);if(a instanceof nh)return new Fi(a.table);if(a instanceof oh)return new Kj(a.table);
if(a instanceof mh)return new lj(this.c,a.table);if(a instanceof lh)return new jj(this.c,a.table);throw new C(514);};function Nj(a){this.pg=new Ei;this.Dg=new Lj(a)};function Oj(){this.cf=x()}function Pj(a,b){var c=a.cf.get(b.getName())||null;null===c&&(c=new Qj,a.cf.set(b.getName(),c));return c}function Rj(a,b,c,d){c.forEach(function(a){a=Pj(this,a);0==d?(a.eb=null,a.wc=b):3==d?(null===a.Yb&&(a.Yb=A()),a.Yb.add(b),null===a.Ya&&(a.Ya=A()),a.Ya.delete(b)):1==d?(null===a.Ya&&(a.Ya=A()),a.Ya.add(b)):2==d&&(a.eb=b)},a)}
function Sj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Pj(this,a);var c=null===a.Ya||0==a.Ya.size;e=0==d?(null===a.Yb||0==a.Yb.size)&&c&&null===a.wc&&null!==a.eb&&a.eb==b:3==d?null===a.wc&&null===a.eb&&null!==a.Ya&&a.Ya.has(b):1==d?null===a.eb:c&&(null===a.eb||a.eb==b)}},a);return e}function Tj(a,b,c,d){var e=Sj(a,b,c,d);e&&Rj(a,b,c,d);return e}Oj.prototype.releaseLock=function(a,b){b.forEach(function(b){Pj(this,b).releaseLock(a)},this)};
function Uj(a,b){b.forEach(function(a){Pj(this,a).eb=null},a)}function Qj(){this.Yb=this.Ya=this.eb=this.wc=null}Qj.prototype.releaseLock=function(a){this.wc==a&&(this.wc=null);this.eb==a&&(this.eb=null);null===this.Ya||this.Ya.delete(a);null===this.Yb||this.Yb.delete(a)};function Vj(){this.Ub=new Wj;this.Ec=new Oj}function Ce(a,b){(2>b.getPriority()||2>b.getPriority())&&Uj(a.Ec,b.da());a.Ub.Ab(b);Xj(a);return b.Db.ha}function Xj(a){for(var b=a.Ub.ra(),c=0;c<b.length;c++){var d=b[c];if(0==d.I()?Yj(a,d,1,3):Yj(a,d,2,0)){a.Ub.remove(d);var e=a;d.exec().then(e.Ag.bind(e,d),e.zg.bind(e,d))}}}function Yj(a,b,c,d){var e=!1;Tj(a.Ec,b.W(),b.da(),c)&&(e=Tj(a.Ec,b.W(),b.da(),d));return e}Vj.prototype.Ag=function(a,b){this.Ec.releaseLock(a.W(),a.da());a.Db.resolve(b);Xj(this)};
Vj.prototype.zg=function(a,b){this.Ec.releaseLock(a.W(),a.da());a.Db.reject(b);Xj(this)};function Wj(){this.Ub=[]}Wj.prototype.Ab=function(a){Af(this.Ub,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.W()-c.W():d})};Wj.prototype.ra=function(){return this.Ub.slice()};Wj.prototype.remove=function(a){var b=this.Ub;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Zj(){this.Nc=x()}var ak;function bk(){ak||(ak=new Zj);return ak}Zj.prototype.clear=function(){this.Nc.clear()};Zj.prototype.clear=Zj.prototype.clear;Zj.prototype.rb=function(a,b){this.Nc.set(a.toString(),b);return b};Zj.prototype.registerService=Zj.prototype.rb;Zj.prototype.b=function(a){var b=this.Nc.get(a.toString())||null;if(null===b)throw new C(7,a.toString());return b};Zj.prototype.getService=Zj.prototype.b;Zj.prototype.ld=function(a){return this.Nc.has(a.toString())};
Zj.prototype.isRegistered=Zj.prototype.ld;function ck(){var a=bk();return Zb(a.Nc)};function dk(a,b,c,d){return null!=a?null!=b?ek(a,b,c,d):fk(a):gk()}function hk(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function ik(a){var b=bk();a=new nc("ns_"+a);return b.ld(a)?b.b(a):null}function gk(){var a={};ck().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=ik(b).b(uc).version())});return hk(a)}function fk(a){a=ik(a);var b={};if(null!=a){var c=a.b(qc);a.b(uc).pa().forEach(function(a){b[a.getName()]=c.get(ef(a)).Y().ia})}return hk(b)}
function ek(a,b,c,d){var e=ik(a);a=[];if(null!=e){var f=null;try{f=e.b(uc).table(b)}catch(h){}null!=f&&(b=e.b(qc),e=e.b(pc),c=b.get(ef(f)).Va(void 0,!1,c,d),c.length&&(a=xf(e,c).map(function(a){return a.m})))}return hk(a)};function jk(a,b){this.Pd=Yd();this.ke=a;this.nd=b;this.K=kk(this)}function kk(a){if(0<a.ke.f.length)return a.ke.f;var b=[];a.ke.from.forEach(function(a){a.lb().forEach(function(a){b.push(a)})});return b}jk.prototype.$=function(a,b){return this.K.every(function(c){return Zd(this.Pd,c.I(),"eq")(H(a,c),H(b,c))},this)};
function lk(a,b,c){var d=null===b?[]:b.entries,e=pb(d,c.entries,a.$.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.nd.splice(f,1),k=mk(h,k,0,a.nd),b.push(k))}e=pb(d,c.entries,a.$.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.nd.splice(h,0,k.va.m),k=mk(h,[],1,a.nd),b.push(k));return b}function mk(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function nk(){this.fc=x()}nk.prototype.Bd=function(a,b){var c=ka(a.query).toString(),d=this.fc.get(c)||null;null===d&&(d=new ok(a),this.fc.set(c,d));d.Bd(b)};nk.prototype.le=function(a,b){a=ka(a.query).toString();var c=this.fc.get(a)||null;c.le(b);0<c.Hc.size||this.fc.delete(a)};function Be(a,b){var c=A();b.forEach(function(a){c.add(a.getName())});var d=[];a.fc.forEach(function(a){a=a.Bc();a.context.from.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function ze(a,b,c){b=ka(null!=b.Wc?b.Wc:b).toString();a=a.fc.get(b)||null;null!==a&&pk(a,c)}function ok(a){this.Gf=a;this.Hc=A();this.xg=[];this.af=null;this.Qf=new jk(a.query,this.xg)}ok.prototype.Bd=function(a){this.Hc.has(a)||this.Hc.add(a)};ok.prototype.le=function(a){return this.Hc.delete(a)};ok.prototype.Bc=function(){var a=this.Gf;return{context:a.query,he:ci(a)}};function pk(a,b){var c=lk(a.Qf,a.af,b);a.af=b;0<c.length&&a.Hc.forEach(function(a){a(c)})};function qk(a,b){var c=a.b(uc),d=b||{};b=new wf(c);a.rb(pc,b);b=null;var e=!1;null!=d.storeType?b=d.storeType:(b=Xb(),b=b.eg?0:b.Tg?4:1);switch(b){case 0:b=new af(a,c);break;case 1:b=new hf(c);break;case 5:b=new kf(c);break;case 4:b=new tf(a,c,d.webSqlDbSize);break;case 3:b=new Oe(c,d.firebase);e=!0;break;default:throw new C(300);}a.rb(oc,b);var f=new xg;a.rb(qc,f);return b.Ea(d.onUpgrade).then(function(){var b=new Nj(a);a.rb(rc,b);b=new Vj;a.rb(sc,b);b=new nk;a.rb(tc,b);return f.Ea(c)}).then(function(){if(e){var b=
new De(a);b.Oa.subscribe(b.ce.bind(b))}d.enableInspector&&(window.top["#lfInspect"]=dk);return(new qg(a)).Ea(c)})};function rk(a){this.c=a;this.g=a.b(uc);this.aa=A(this.g.pa());this.Db=eb()}function sk(a){var b=a.c.b(qc),c=a.c.b(pc),d={};a.g.pa().forEach(function(a){var f=b.get(ef(a)).Va(),f=xf(c,f).map(function(a){return a.m});d[a.getName()]=f});return{name:a.g.name(),version:a.g.version(),tables:d}}m=rk.prototype;m.exec=function(){var a=sk(this),a=new Kd(new $b(-1,a),!0);return v([new G([a],[])])};m.I=l(0);m.da=g("aa");m.W=function(){return ka(this)};m.getPriority=l(0);function tk(a,b){this.c=a;this.g=a.b(uc);this.aa=A(this.g.pa());this.Db=eb();this.Ba=b;this.Oa=a.b(oc);this.V=a.b(pc);this.C=a.b(qc)}m=tk.prototype;
m.exec=function(){if(!(this.Oa instanceof af||this.Oa instanceof hf||this.Oa instanceof tf))throw new C(300);var a;a:{a=this.g.pa();for(var b=0;b<a.length;++b)if(0<this.C.get(ef(a[b])).Y().ia){a=!1;break a}a=!0}if(!a)throw new C(110);if(this.g.name()!=this.Ba.name||this.g.version()!=this.Ba.version)throw new C(111);if(null==this.Ba.tables)throw new C(112);return uk(this)};m.I=l(1);m.da=g("aa");m.W=function(){return ka(this)};m.getPriority=l(0);
function uk(a){var b=new nd(a.c,a.aa),b=a.Oa.Fb(a.I(),B(a.aa),b),c;for(c in a.Ba.tables){var d=a.g.table(c),e=a.Ba.tables[c].map(function(a){return d.xb(a)}),f=b.H(c,d.kb,0);a.V.Wb(c,e);var h=a.C.lc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.nb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ka()};function vk(a,b){this.c=a;this.Oa=a.b(oc);this.Ia=a.b(sc);this.Ib=a.b(tc);this.aa=A(b);this.Ra=new nd(this.c,this.aa);this.Db=eb();this.xc=eb();this.ye=eb()}m=vk.prototype;m.exec=function(){this.ye.resolve();return this.xc.ha};m.I=l(1);m.da=g("aa");m.W=function(){return ka(this)};m.getPriority=l(2);function wk(a){Ce(a.Ia,a);return a.ye.ha}
function xk(a,b){b=b.Bc();return b.he.ab().exec(a.Ra,b.context).then(function(a){return Cd(a[0])},function(a){this.Ra.Jb();var b=new jb(a.name);this.xc.reject(b);throw a;}.bind(a))}m.ka=function(){this.ja=this.Oa.Fb(this.I(),B(this.aa),this.Ra);this.ja.ka().then(function(){this.Mc();this.xc.resolve()}.bind(this),function(a){this.Ra.Jb();this.xc.reject(a)}.bind(this));return this.Db.ha};m.Jb=function(){this.Ra.Jb();this.xc.resolve();return this.Db.ha};
m.Mc=function(){var a=Be(this.Ib,this.aa);0!=a.length&&(a=new ye(this.c,a),Ce(this.Ia,a))};m.Y=function(){var a=null;null!=this.ja&&(a=this.ja.Y());return null===a?new z(!1,0,0,0,0):a};function V(a){this.c=a;this.Ia=a.b(sc);this.Kb=null;this.Ta=0;0==yk.size&&(yk.set(0,A([1,4])),yk.set(1,A([2])),yk.set(2,A([3,5,6])),yk.set(3,A([2,7])),yk.set(4,A([7])),yk.set(5,A([7])),yk.set(6,A([7])))}q("lf.proc.Transaction",V);var yk=x();function zk(a,b){var c=yk.get(a.Ta)||null;if(null===c||!c.has(b))throw new C(107,a.Ta,b);a.Ta=b}
V.prototype.exec=function(a){zk(this,4);var b=[];try{a.forEach(function(a){a.ib();b.push(a.Bc())},this)}catch(c){return zk(this,7),ab(c)}this.Kb=new Fh(this.c,b);return Ce(this.Ia,this.Kb).then(function(a){zk(this,7);return a.map(function(a){return Cd(a)})}.bind(this),function(a){zk(this,7);throw a;}.bind(this))};V.prototype.exec=V.prototype.exec;V.prototype.Ef=function(a){zk(this,1);this.Kb=new vk(this.c,a);return wk(this.Kb).then(function(){zk(this,2)}.bind(this))};V.prototype.begin=V.prototype.Ef;
V.prototype.Df=function(a){zk(this,3);return xk(this.Kb,a).then(function(a){zk(this,2);return a}.bind(this),function(a){zk(this,7);throw a;}.bind(this))};V.prototype.attach=V.prototype.Df;V.prototype.ka=function(){zk(this,5);return this.Kb.ka().then(function(){zk(this,7)}.bind(this))};V.prototype.commit=V.prototype.ka;V.prototype.Jb=function(){zk(this,6);return this.Kb.Jb().then(function(){zk(this,7)}.bind(this))};V.prototype.rollback=V.prototype.Jb;
V.prototype.Y=function(){if(7!=this.Ta)throw new C(105);return this.Kb.Y()};V.prototype.stats=V.prototype.Y;function W(a){this.c=a;this.g=a.b(uc);this.gd=!1}q("lf.proc.Database",W);W.prototype.Ea=function(a){this.c.rb(uc,this.g);return qk(this.c,a).then(function(){this.gd=!0;this.Ia=this.c.b(sc);return this}.bind(this))};W.prototype.init=W.prototype.Ea;W.prototype.zb=g("g");W.prototype.getSchema=W.prototype.zb;function Ak(a){if(!a.gd)throw new C(2);}W.prototype.select=function(a){Ak(this);return new U(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.Ab=function(){Ak(this);return new ei(this.c)};W.prototype.insert=W.prototype.Ab;W.prototype.Vd=function(){Ak(this);return new ei(this.c,!0)};W.prototype.insertOrReplace=W.prototype.Vd;W.prototype.update=function(a){Ak(this);return new oi(this.c,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Ak(this);return new di(this.c)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Ak(this);this.c.b(tc).Bd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Ak(this);this.c.b(tc).le(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Mf=function(){Ak(this);return new V(this.c)};W.prototype.createTransaction=W.prototype.Mf;W.prototype.close=function(){try{this.c.b(oc).close()}catch(a){}this.c.clear();this.gd=!1};W.prototype.close=W.prototype.close;
W.prototype.Wf=function(){Ak(this);var a=new rk(this.c);return Ce(this.Ia,a).then(function(a){return Cd(a[0])[0]})};W.prototype["export"]=W.prototype.Wf;W.prototype.import=function(a){Ak(this);a=new tk(this.c,a);return Ce(this.Ia,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.U=a;this.A=b;this.Xe=c;this.Ve=d;this.wf=e;this.Ka=f||null}q("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("A");m.j=function(){return Md(this.U)+"."+this.A};m.toString=function(){return this.j()};m.H=g("U");m.I=g("wf");X.prototype.getType=X.prototype.I;X.prototype.Da=function(){null==this.ta&&(this.ta=[],this.H().Da().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.A)&&this.ta.push(a)},this));return this.ta};
X.prototype.Ca=function(){if(!p(this.fa)){var a=this.Da().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.hc=g("Ve");X.prototype.isNullable=X.prototype.hc;X.prototype.Dc=g("Xe");X.prototype.Qa=function(a){return Qg(this,a,"eq")};X.prototype.eq=X.prototype.Qa;X.prototype.df=function(a){return Qg(this,a,"neq")};X.prototype.neq=X.prototype.df;X.prototype.qg=function(a){return Qg(this,a,"lt")};
X.prototype.lt=X.prototype.qg;X.prototype.rg=function(a){return Qg(this,a,"lte")};X.prototype.lte=X.prototype.rg;X.prototype.$f=function(a){return Qg(this,a,"gt")};X.prototype.gt=X.prototype.$f;X.prototype.ag=function(a){return Qg(this,a,"gte")};X.prototype.gte=X.prototype.ag;X.prototype.match=function(a){return Qg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Ff=function(a,b){return Qg(this,[a,b],"between")};X.prototype.between=X.prototype.Ff;
X.prototype.bg=function(a){return Qg(this,a,"in")};X.prototype["in"]=X.prototype.bg;X.prototype.lg=function(){return this.Qa(null)};X.prototype.isNull=X.prototype.lg;X.prototype.kg=function(){return this.df(null)};X.prototype.isNotNull=X.prototype.kg;X.prototype.rc=function(a){return new X(this.U,this.A,this.Xe,this.Ve,this.wf,a)};X.prototype.as=X.prototype.rc;function Bk(a){this.g=a;this.Hd=new Wc;this.me=new Wc;this.ff=new Wc;this.He=x();this.h=new Wc;this.De=new Wc;this.lf=new Wc;this.Ge=new Wc;Ck(this)}function Ck(a){a.g.pa().forEach(function(a){var c=a.getName();a.Mb.Td.forEach(function(d){this.ff.set(c,this.g.table(d.Xa));this.h.set(d.Xa,a);0==d.action?(this.me.set(d.Xa,d),this.lf.set(d.Xa,a)):(this.Hd.set(d.Xa,d),this.De.set(d.Xa,a));this.He.set(a.getName()+"."+d.vb,d.Xa);this.Ge.set(d.Xa+"."+d.Jc,a.getName())},this)},a)}
function dd(a,b,c){if(null!=c)return 1==c?a.Hd.get(b):a.me.get(b);c=a.Hd.get(b);a=a.me.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Lh(a,b){a=b.get(a);return null===a?[]:a}function Nh(a,b){var c=A();b.forEach(function(a){(a=this.He.get(a))&&c.add(a)},a);return B(c).map(function(a){return this.g.table(a)},a)}function Jh(a,b,c){return null!=c?0==c?Lh(b,a.lf):Lh(b,a.De):Lh(b,a.h)}
function Oh(a,b){var c=A();b.forEach(function(a){(a=this.Ge.get(a))&&a.forEach(function(a){c.add(a)})},a);return B(c).map(function(a){return this.g.table(a)},a)};function Dk(a,b,c){this.rd=a;this.wg=b;this.Td=c}q("lf.schema.Constraint",Dk);Dk.prototype.Zf=g("rd");Dk.prototype.getPrimaryKey=Dk.prototype.Zf;Dk.prototype.Yf=g("Td");Dk.prototype.getForeignKeys=Dk.prototype.Yf;function Ek(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new C(540,c);this.Fe=b;this.vb=a.local;this.Xa=d[0];this.Jc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){Fk(a);this.Pd=Yd();this.A=a;this.K=x();this.yd=A();this.nc=A();this.md=A();this.Fa=null;this.ta=x();this.qd=!1;this.yb=[]}q("lf.schema.TableBuilder",Y);function Gk(a){this.name=a.name;this.order=a.order;this.autoIncrement=a.autoIncrement}var Hk=A([0,6]);function Fk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new C(502,a);}function Ik(a,b){if(b==a.A)throw new C(546,b);if(a.K.has(b)||a.ta.has(b)||a.nc.has(b))throw new C(503,a.A+"."+b);}
function Jk(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new C(504);},a);if(c&&1<b.length)throw new C(505);}function Kk(a){if(null!==a.Fa){var b=a.ta.get(a.Fa).map(function(a){return a.name}),c=0;if(a.yb.some(function(a,e){c=e;return-1!=b.indexOf(a.vb)},a))throw new C(543,a.yb[c].name);}}
function Lk(a){if(null!==a.Fa){var b=function(a){return a.name},c=JSON.stringify(a.ta.get(a.Fa).map(b));a.ta.forEach(function(a,e){if(e!=this.Fa&&(a=a.map(b),JSON.stringify(a)==c))throw new C(544,this.A+"."+e);},a)}}function Mk(a){null===a.Fa||a.ta.get(a.Fa).forEach(function(a){if(this.md.has(a.name))throw new C(545,this.A+"."+a.name);},a)}Y.prototype.yf=function(a,b){Fk(a);Ik(this,a);this.K.set(a,b);Hk.has(b)&&this.Ae([a]);return this};Y.prototype.addColumn=Y.prototype.yf;
Y.prototype.Af=function(a,b){var c=this.A;this.Fa="pk"+(c[0].toUpperCase()+c.substring(1));Fk(this.Fa);Ik(this,this.Fa);a=Nk(this,a,!0,void 0,b);Jk(this,a);1==a.length&&this.yd.add(a[0].name);this.nc.add(this.Fa);this.ta.set(this.Fa,a);return this};Y.prototype.addPrimaryKey=Y.prototype.Af;
Y.prototype.zf=function(a,b){Fk(a);Ik(this,a);b=new Ek(b,this.A,a);p(b.action)||(b.action=0);p(b.timing)||(b.timing=0);if(1==b.action&&1==b.timing)throw new C(506);if(!this.K.has(b.vb))throw new C(540,a);this.yb.push(b);this.ze(a,[b.vb],this.yd.has(b.vb));return this};Y.prototype.addForeignKey=Y.prototype.zf;Y.prototype.Bf=function(a,b){Fk(a);Ik(this,a);b=Nk(this,b,!0);1==b.length&&(this.yd.add(b[0].name),Ok(this,b[0].name));this.ta.set(a,b);this.nc.add(a);return this};Y.prototype.addUnique=Y.prototype.Bf;
function Ok(a,b){a.yb.forEach(function(a){a.vb==b&&this.nc.add(a.name.split(".")[1])},a)}Y.prototype.Ae=function(a){Nk(this,a,!1).forEach(function(a){this.md.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.Ae;Y.prototype.ze=function(a,b,c,d){Fk(a);Ik(this,a);b=Nk(this,b,!0,d);c&&this.nc.add(a);this.ta.set(a,b);return this};Y.prototype.addIndex=Y.prototype.ze;Y.prototype.Cb=ba("qd");Y.prototype.persistentIndex=Y.prototype.Cb;
Y.prototype.zb=function(){Kk(this);Lk(this);Mk(this);return new (Pk(this))};Y.prototype.getSchema=Y.prototype.zb;function Nk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new Gk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Gk(a)});f.forEach(function(a){if(!this.K.has(a.name))throw new C(508,this.A,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new C(509,this.A,a.name);}},a);return f}
function Pk(a){function b(){function b(c){return a.ta.get(c).map(function(a){return{ba:this[a.name],order:a.order,autoIncrement:a.autoIncrement}},this)}var d=Zb(a.K).map(function(b){this[b]=new X(this,b,a.yd.has(b),a.md.has(b),a.K.get(b));return this[b]},this),e=Zb(a.ta).map(function(d){return new Sg(a.A,d,a.nc.has(d),b.call(this,d))},this);Q.call(this,a.A,d,e,a.qd);var f=null===a.Fa?null:new Sg(a.A,a.Fa,!0,b.call(this,a.Fa)),h=d.filter(function(b){return!a.md.has(b.getName())});this.Mb=new Dk(f,
h,a.yb);this.pf=Qk(a,d,e)}r(b,Q);b.prototype.xb=function(a){return new this.pf(ac++,a)};b.prototype.createRow=b.prototype.xb;b.prototype.kb=function(a){var b={};this.lb().forEach(function(e){var f=e.getName();e=e.I();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,F=0;n<e.length;n+=2)k[F++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.pf(a.id,b)};
b.prototype.deserializeRow=b.prototype.kb;b.prototype.Me=g("Mb");b.prototype.getConstraint=b.prototype.Me;return b}
function Qk(a,b,c){function d(a,d){this.K=b;this.ta=c;$b.call(this,a,d)}r(d,$b);d.prototype.Je=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.hc()?null:Vc[b.I()]});return a};d.prototype.vf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.I();var d=this.m[c];a[c]=0==b?null!=d?dc(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Pd.Ye.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.j();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.nb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.m):null};return d};function Rk(a,b){this.g=new Z(a,b);this.tb=x();this.yc=!1;this.i=null}q("lf.schema.Builder",Rk);function Sk(a,b){b.yb.forEach(function(a){var d=a.Xa;if(!this.tb.has(d))throw new C(536,a.name);var d=this.tb.get(d).zb(),e=a.Jc;if(!d.hasOwnProperty(e))throw new C(537,a.name);if(b.zb()[a.vb].I()!=d[e].I())throw new C(538,a.name);if(!d[e].Dc())throw new C(539,a.name);},a)}
Rk.prototype.Jf=function(a){a.yb.forEach(function(a){this.tb.get(a.Xa).yb.forEach(function(c){if(c.vb==a.Jc)throw new C(534,a.name);},this)},this)};function Tk(a){a.yc||(a.tb.forEach(function(a){Sk(this,a);a=a.zb();this.g.M.set(a.getName(),a)},a),y(a.tb).forEach(a.Jf,a),Uk(a),a.tb.clear(),a.yc=!0)}function Vk(a,b,c){b.xe||(b.xe=!0,b.de=!0,b.Ke.forEach(function(a){a=c.get(a);if(!a.xe)Vk(this,a,c);else if(a.de&&b!=a)throw new C(533);},a));b.de=!1}
function Uk(a){var b=x();a.g.M.forEach(function(a,d){b.set(d,new Wk(d))},a);a.tb.forEach(function(a,d){a.yb.forEach(function(a){b.get(a.Xa).Ke.add(d)})});y(b).forEach(function(a){Vk(this,a,b)},a)}function Wk(a){this.de=this.xe=!1;this.Ke=A();this.mc=a}Rk.prototype.zb=function(){this.yc||Tk(this);return this.g};Rk.prototype.getSchema=Rk.prototype.zb;Rk.prototype.Pe=function(){var a=new nc("ns_"+this.g.name()),b=bk(),c;b.ld(a)?c=b.b(a):(c=new Zj,b.rb(a,c));return c};Rk.prototype.getGlobal=Rk.prototype.Pe;
Rk.prototype.connect=function(a){if(null!==this.i&&this.i.gd)throw new C(113);if(null===this.i){var b=this.Pe();b.ld(uc)||b.rb(uc,this.zb());this.i=new W(b)}return this.i.Ea(a)};Rk.prototype.connect=Rk.prototype.connect;Rk.prototype.Lf=function(a){if(this.tb.has(a))throw new C(503,a);if(this.yc)throw new C(535);this.tb.set(a,new Y(a));return this.tb.get(a)};Rk.prototype.createTable=Rk.prototype.Lf;Rk.prototype.re=function(a){if(this.yc)throw new C(535);this.g.re(a);return this};
Rk.prototype.setPragma=Rk.prototype.re;function Z(a,b){this.A=a;this.Ua=b;this.M=x();this.ie={Rf:!1}}q("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("A");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Ua");Z.prototype.version=Z.prototype.version;Z.prototype.pa=function(){return y(this.M)};Z.prototype.tables=Z.prototype.pa;Z.prototype.table=function(a){if(!this.M.has(a))throw new C(101,a);return this.M.get(a)};Z.prototype.table=Z.prototype.table;
Z.prototype.info=function(){this.Ue||(this.Ue=new Bk(this));return this.Ue};Z.prototype.Eg=g("ie");Z.prototype.pragma=Z.prototype.Eg;Z.prototype.re=ba("ie");q("lf.schema.create",function(a,b){return new Rk(a,b)});u.prototype.catch=u.prototype.ue;u.prototype["catch"]=u.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))();
//# sourceMappingURL=lovefield.min.js.map
